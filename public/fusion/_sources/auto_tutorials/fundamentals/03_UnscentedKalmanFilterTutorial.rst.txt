
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_tutorials/fundamentals/03_UnscentedKalmanFilterTutorial.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_tutorials_fundamentals_03_UnscentedKalmanFilterTutorial.py>`
        to download the full example code or to run this example in your browser via Binder

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_tutorials_fundamentals_03_UnscentedKalmanFilterTutorial.py:


==============================================
3 - Non-linear models: unscented Kalman filter
==============================================

.. GENERATED FROM PYTHON SOURCE LINES 10-24

The previous tutorial showed how the extended Kalman filter propagates estimates using a
first-order linearisation of the transition and/or sensor models. Clearly there are limits to
such an approximation, and in situations where models deviate significantly from linearity,
performance can suffer.

In such situations it can be beneficial to seek alternative approximations. One such comes via
the so-called *unscented transform* (UT). In this we characterise a Gaussian distribution using a
series of weighted samples, *sigma points*, and propagate these through the non-linear function.
A transformed Gaussian is then reconstructed from the new sigma points. This forms the basis for
the unscented Kalman filter (UKF).

This tutorial will first run a simulation in an entirely equivalent fashion to the previous
(EKF) tutorial. We'll then look into more precise details concerning the UT and try and develop
some intuition into the reasons for its effectiveness.

.. GENERATED FROM PYTHON SOURCE LINES 26-63

Background
----------
Limited detail on how SMART FUSION does the UKF is provided below. See Julier et al. (2000) [#]_
for fuller, better details of the UKF.

For dimension :math:`D`, a set of :math:`2 D + 1` sigma points are calculated at:

.. math::
          \mathbf{s}_j &= \mathbf{x}, \ \ j = 0 \\
          \mathbf{s}_j &= \mathbf{x} + \alpha \sqrt{\kappa} A_j, \ \ j = 1, ..., D \\
          \mathbf{s}_j &= \mathbf{x} - \alpha \sqrt{\kappa} A_j, \ \ j = D + 1, ..., 2 D

where :math:`A_j` is the :math:`j` th column of :math:`A`, a *square root matrix* of the
covariance, :math:`P = AA^T`, of the state to be approximated, and :math:`\mathbf{x}` is its
mean.

Two sets of weights, mean and covariance, are calculated:

.. math::
          W^m_0 &= \frac{\lambda}{c} \\
          W^c_0 &= \frac{\lambda}{c} + (1 - \alpha^2 + \beta) \\
          W^m_j &= W^c_j = \frac{1}{2 c}

where :math:`c = \alpha^2 (D + \kappa)`, :math:`\lambda = c - D`. The parameters
:math:`\alpha, \ \beta, \ \kappa` are user-selectable parameters with default values of
:math:`0.5, \ 2, \ 3 - D`.

After the sigma points are transformed :math:`\mathbf{s^{\prime}} = f( \mathbf{s} )`, the
distribution is reconstructed as:

.. math::
          \mathbf{x}^\prime &= \sum\limits^{2 D}_{0} W^{m}_j \mathbf{s}^{\prime}_j \\
          P^\prime &= (\mathbf{s}^{\prime} - \mathbf{x}^\prime) \, diag(W^c) \,
          (\mathbf{s}^{\prime} - \mathbf{x}^\prime)^T + Q

The posterior mean and covariance are accurate to the 2nd order Taylor expansion for any
non-linear model. [#]_

.. GENERATED FROM PYTHON SOURCE LINES 65-69

Nearly-constant velocity example
--------------------------------
This example is equivalent to that in the previous (EKF) tutorial. As with that one, you are
invited to play with the parameters and watch what happens.

.. GENERATED FROM PYTHON SOURCE LINES 69-76

.. code-block:: default


    # Some general imports and initialise time
    import numpy as np

    from datetime import datetime, timedelta
    start_time = datetime.now()








.. GENERATED FROM PYTHON SOURCE LINES 77-80

.. code-block:: default


    np.random.seed(1991)








.. GENERATED FROM PYTHON SOURCE LINES 81-84

Create ground truth
^^^^^^^^^^^^^^^^^^^


.. GENERATED FROM PYTHON SOURCE LINES 84-97

.. code-block:: default

    from smartfusion.types.groundtruth import GroundTruthPath, GroundTruthState
    from smartfusion.models.transition.linear import CombinedLinearGaussianTransitionModel, \
                                                   ConstantVelocity

    transition_model = CombinedLinearGaussianTransitionModel([ConstantVelocity(0.05),
                                                              ConstantVelocity(0.05)])
    truth = GroundTruthPath([GroundTruthState([0, 1, 0, 1], timestamp=start_time)])

    for k in range(1, 21):
        truth.append(GroundTruthState(
            transition_model.function(truth[k-1], noise=True, time_interval=timedelta(seconds=1)),
            timestamp=start_time+timedelta(seconds=k)))








.. GENERATED FROM PYTHON SOURCE LINES 98-99

Set-up plot to render ground truth, as before.

.. GENERATED FROM PYTHON SOURCE LINES 99-105

.. code-block:: default


    from smartfusion.plotter import Plotterly
    plotter = Plotterly()
    plotter.plot_ground_truths(truth, [0, 2])
    plotter.fig






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
            <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="aead95a5-cfb2-41e8-b9d0-6ef9c7cf3a8b" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("aead95a5-cfb2-41e8-b9d0-6ef9c7cf3a8b")) {                    Plotly.newPlot(                        "aead95a5-cfb2-41e8-b9d0-6ef9c7cf3a8b",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.381660","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.381660","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.381660","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.381660","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.381660","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.381660","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.381660","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.381660","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.381660","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.381660","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.381660","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.381660","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.381660","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.381660","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.381660","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.381660","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.381660","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.381660","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.381660","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.381660","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.381660"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 106-109

Simulate the measurement
^^^^^^^^^^^^^^^^^^^^^^^^


.. GENERATED FROM PYTHON SOURCE LINES 109-120

.. code-block:: default

    from smartfusion.models.measurement.nonlinear import CartesianToBearingRange
    # Sensor position
    sensor_x = 50
    sensor_y = 0

    # Make noisy measurement (with bearing variance = 0.2 degrees).
    measurement_model = CartesianToBearingRange(ndim_state=4,
                                                mapping=(0, 2),
                                                noise_covar=np.diag([np.radians(0.2), 1]),
                                                translation_offset=np.array([[sensor_x], [sensor_y]]))








.. GENERATED FROM PYTHON SOURCE LINES 121-136

.. code-block:: default

    from smartfusion.types.detection import Detection

    # Make sensor that produces the noisy measurements.
    measurements = []
    for state in truth:
        measurement = measurement_model.function(state, noise=True)
        measurements.append(Detection(measurement, timestamp=state.timestamp,
                                      measurement_model=measurement_model))

    # Plot the measurements
    # Where the model is nonlinear the plotting function uses the inverse function to get coordinates

    plotter.plot_measurements(measurements, [0, 2])
    plotter.fig






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
            <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="ed493511-bfc2-4863-836c-02df03a27531" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("ed493511-bfc2-4863-836c-02df03a27531")) {                    Plotly.newPlot(                        "ed493511-bfc2-4863-836c-02df03a27531",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.381660","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.381660","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.381660","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.381660","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.381660","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.381660","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.381660","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.381660","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.381660","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.381660","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.381660","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.381660","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.381660","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.381660","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.381660","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.381660","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.381660","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.381660","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.381660","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.381660","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.381660"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"},{"legendgroup":"Measurements<br>(Detections)","legendrank":200,"marker":{"color":"#636EFA"},"mode":"markers","name":"Measurements<br>(Detections)","showlegend":true,"text":["Detection<br>[[Bearing(2.937703488743674)]\n [45.10212036890871]]<br>2022-09-26 17:25:35.381660","Detection<br>[[Bearing(2.645421155733226)]\n [41.82268473115909]]<br>2022-09-26 17:25:39.381660","Detection<br>[[Bearing(2.6573352109597863)]\n [43.4437023789485]]<br>2022-09-26 17:25:41.381660","Detection<br>[[Bearing(3.044767462908764)]\n [45.74123179494575]]<br>2022-09-26 17:25:34.381660","Detection<br>[[Bearing(2.9452471282335875)]\n [46.2161839747064]]<br>2022-09-26 17:25:36.381660","Detection<br>[[Bearing(2.751748017042739)]\n [43.40696995272662]]<br>2022-09-26 17:25:40.381660","Detection<br>[[Bearing(3.037053677683474)]\n [45.71541374605071]]<br>2022-09-26 17:25:33.381660","Detection<br>[[Bearing(2.6675764047046098)]\n [45.84408657411932]]<br>2022-09-26 17:25:43.381660","Detection<br>[[Bearing(2.825754941593946)]\n [42.16978735715047]]<br>2022-09-26 17:25:38.381660","Detection<br>[[Bearing(-3.1217136817127424)]\n [47.7876225398533]]<br>2022-09-26 17:25:30.381660","Detection<br>[[Bearing(2.435714315241148)]\n [46.21798149747487]]<br>2022-09-26 17:25:44.381660","Detection<br>[[Bearing(2.32606487631801)]\n [49.55028147242189]]<br>2022-09-26 17:25:46.381660","Detection<br>[[Bearing(2.9878623947562133)]\n [43.60243560034166]]<br>2022-09-26 17:25:37.381660","Detection<br>[[Bearing(2.2168669078367147)]\n [53.473621879810885]]<br>2022-09-26 17:25:48.381660","Detection<br>[[Bearing(2.515900984981293)]\n [45.03578875479237]]<br>2022-09-26 17:25:42.381660","Detection<br>[[Bearing(2.903665081663336)]\n [47.21145298695907]]<br>2022-09-26 17:25:32.381660","Detection<br>[[Bearing(-3.096461688413128)]\n [48.50034235672541]]<br>2022-09-26 17:25:31.381660","Detection<br>[[Bearing(2.5236104370654777)]\n [46.9982845683127]]<br>2022-09-26 17:25:45.381660","Detection<br>[[Bearing(2.0193429860239256)]\n [56.73700365375307]]<br>2022-09-26 17:25:50.381660","Detection<br>[[Bearing(2.2312923796610526)]\n [50.16616524252715]]<br>2022-09-26 17:25:47.381660","Detection<br>[[Bearing(2.113687859118837)]\n [53.696127508762395]]<br>2022-09-26 17:25:49.381660"],"x":[5.832101951594851,13.220645587904379,11.551415784923044,4.473015456288891,4.671810836553469,9.849936778112081,4.534156951991264,9.210581625879023,9.91607756750875,2.221819350783221,14.826171916953918,16.034063908529554,6.911778516695591,17.806013715912904,13.495870684052178,4.1185639808006655,1.549042106302693,11.694085658745927,25.395634186662065,19.22262346395934,22.259832475318465],"y":[9.132252939840118,19.91019957588045,20.2252725135359,4.421986485240061,9.016148199021414,16.496589458288486,4.770342745174409,20.926146862627856,13.098478086148486,-0.9499062386905731,29.98172162643846,36.07693971814103,6.676642845595845,42.696316985016416,26.375572252575715,11.127224359918513,-2.188124288687379,27.230418264224387,51.12448304412903,39.61561849446898,45.97561544057756],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 137-142

Create unscented Kalman filter components
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Note that the transition of the target state is linear, so we have no real need for a
:class:`~.UnscentedKalmanPredictor`. But we'll use one anyway, if nothing else to demonstrate
that a linear model won't break anything.

.. GENERATED FROM PYTHON SOURCE LINES 142-148

.. code-block:: default

    from smartfusion.predictor.kalman import UnscentedKalmanPredictor
    predictor = UnscentedKalmanPredictor(transition_model)
    # Create :class:`~.UnscentedKalmanUpdater`
    from smartfusion.updater.kalman import UnscentedKalmanUpdater
    unscented_updater = UnscentedKalmanUpdater(measurement_model)  # Keep alpha as default = 0.5








.. GENERATED FROM PYTHON SOURCE LINES 149-153

Run the Unscented Kalman Filter
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Create a prior

.. GENERATED FROM PYTHON SOURCE LINES 153-156

.. code-block:: default

    from smartfusion.types.state import GaussianState
    prior = GaussianState([[0], [1], [0], [1]], np.diag([1.5, 0.5, 1.5, 0.5]), timestamp=start_time)








.. GENERATED FROM PYTHON SOURCE LINES 157-158

Populate the track

.. GENERATED FROM PYTHON SOURCE LINES 158-169

.. code-block:: default

    from smartfusion.types.hypothesis import SingleHypothesis
    from smartfusion.types.track import Track

    track = Track()
    for measurement in measurements:
        prediction = predictor.predict(prior, timestamp=measurement.timestamp)
        hypothesis = SingleHypothesis(prediction, measurement)
        post = unscented_updater.update(hypothesis)
        track.append(post)
        prior = track[-1]








.. GENERATED FROM PYTHON SOURCE LINES 170-171

And plot

.. GENERATED FROM PYTHON SOURCE LINES 171-175

.. code-block:: default


    plotter.plot_tracks(track, [0, 2], uncertainty=True)
    plotter.fig






.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
            <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="41510a9d-d42b-4d85-b40b-b94794d96e14" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("41510a9d-d42b-4d85-b40b-b94794d96e14")) {                    Plotly.newPlot(                        "41510a9d-d42b-4d85-b40b-b94794d96e14",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.381660","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.381660","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.381660","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.381660","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.381660","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.381660","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.381660","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.381660","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.381660","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.381660","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.381660","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.381660","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.381660","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.381660","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.381660","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.381660","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.381660","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.381660","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.381660","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.381660","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.381660"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"},{"legendgroup":"Measurements<br>(Detections)","legendrank":200,"marker":{"color":"#636EFA"},"mode":"markers","name":"Measurements<br>(Detections)","showlegend":true,"text":["Detection<br>[[Bearing(2.937703488743674)]\n [45.10212036890871]]<br>2022-09-26 17:25:35.381660","Detection<br>[[Bearing(2.645421155733226)]\n [41.82268473115909]]<br>2022-09-26 17:25:39.381660","Detection<br>[[Bearing(2.6573352109597863)]\n [43.4437023789485]]<br>2022-09-26 17:25:41.381660","Detection<br>[[Bearing(3.044767462908764)]\n [45.74123179494575]]<br>2022-09-26 17:25:34.381660","Detection<br>[[Bearing(2.9452471282335875)]\n [46.2161839747064]]<br>2022-09-26 17:25:36.381660","Detection<br>[[Bearing(2.751748017042739)]\n [43.40696995272662]]<br>2022-09-26 17:25:40.381660","Detection<br>[[Bearing(3.037053677683474)]\n [45.71541374605071]]<br>2022-09-26 17:25:33.381660","Detection<br>[[Bearing(2.6675764047046098)]\n [45.84408657411932]]<br>2022-09-26 17:25:43.381660","Detection<br>[[Bearing(2.825754941593946)]\n [42.16978735715047]]<br>2022-09-26 17:25:38.381660","Detection<br>[[Bearing(-3.1217136817127424)]\n [47.7876225398533]]<br>2022-09-26 17:25:30.381660","Detection<br>[[Bearing(2.435714315241148)]\n [46.21798149747487]]<br>2022-09-26 17:25:44.381660","Detection<br>[[Bearing(2.32606487631801)]\n [49.55028147242189]]<br>2022-09-26 17:25:46.381660","Detection<br>[[Bearing(2.9878623947562133)]\n [43.60243560034166]]<br>2022-09-26 17:25:37.381660","Detection<br>[[Bearing(2.2168669078367147)]\n [53.473621879810885]]<br>2022-09-26 17:25:48.381660","Detection<br>[[Bearing(2.515900984981293)]\n [45.03578875479237]]<br>2022-09-26 17:25:42.381660","Detection<br>[[Bearing(2.903665081663336)]\n [47.21145298695907]]<br>2022-09-26 17:25:32.381660","Detection<br>[[Bearing(-3.096461688413128)]\n [48.50034235672541]]<br>2022-09-26 17:25:31.381660","Detection<br>[[Bearing(2.5236104370654777)]\n [46.9982845683127]]<br>2022-09-26 17:25:45.381660","Detection<br>[[Bearing(2.0193429860239256)]\n [56.73700365375307]]<br>2022-09-26 17:25:50.381660","Detection<br>[[Bearing(2.2312923796610526)]\n [50.16616524252715]]<br>2022-09-26 17:25:47.381660","Detection<br>[[Bearing(2.113687859118837)]\n [53.696127508762395]]<br>2022-09-26 17:25:49.381660"],"x":[5.832101951594851,13.220645587904379,11.551415784923044,4.473015456288891,4.671810836553469,9.849936778112081,4.534156951991264,9.210581625879023,9.91607756750875,2.221819350783221,14.826171916953918,16.034063908529554,6.911778516695591,17.806013715912904,13.495870684052178,4.1185639808006655,1.549042106302693,11.694085658745927,25.395634186662065,19.22262346395934,22.259832475318465],"y":[9.132252939840118,19.91019957588045,20.2252725135359,4.421986485240061,9.016148199021414,16.496589458288486,4.770342745174409,20.926146862627856,13.098478086148486,-0.9499062386905731,29.98172162643846,36.07693971814103,6.676642845595845,42.696316985016416,26.375572252575715,11.127224359918513,-2.188124288687379,27.230418264224387,51.12448304412903,39.61561849446898,45.97561544057756],"type":"scatter"},{"legendgroup":"Tracks","legendrank":300,"marker":{"symbol":["square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square"]},"mode":"markers+lines","name":"Tracks","showlegend":true,"text":["GaussianStateUpdate<br>[[ 1.33609454]\n [ 1.        ]\n [-0.14576746]\n [ 1.        ]]<br>2022-09-26 17:25:30.381660","GaussianStateUpdate<br>[[1.9008963 ]\n [0.79543266]\n [0.31088847]\n [0.84123607]]<br>2022-09-26 17:25:31.381660","GaussianStateUpdate<br>[[2.83880836]\n [0.85966634]\n [3.8554779 ]\n [1.76258869]]<br>2022-09-26 17:25:32.381660","GaussianStateUpdate<br>[[4.23717942]\n [1.07649667]\n [5.22894448]\n [1.64290782]]<br>2022-09-26 17:25:33.381660","GaussianStateUpdate<br>[[4.92065708]\n [0.94271276]\n [5.96023387]\n [1.40462821]]<br>2022-09-26 17:25:34.381660","GaussianStateUpdate<br>[[5.81206633]\n [0.91880925]\n [8.078701  ]\n [1.57512509]]<br>2022-09-26 17:25:35.381660","GaussianStateUpdate<br>[[5.76825704]\n [0.6108306 ]\n [9.58363683]\n [1.57865543]]<br>2022-09-26 17:25:36.381660","GaussianStateUpdate<br>[[6.70678769]\n [0.74992379]\n [9.35708778]\n [1.18830947]]<br>2022-09-26 17:25:37.381660","GaussianStateUpdate<br>[[ 8.53907789]\n [ 1.0736714 ]\n [11.46296319]\n [ 1.34657653]]<br>2022-09-26 17:25:38.381660","GaussianStateUpdate<br>[[10.69972362]\n [ 1.34808914]\n [15.52976398]\n [ 1.87666529]]<br>2022-09-26 17:25:39.381660","GaussianStateUpdate<br>[[11.17932633]\n [ 1.07262475]\n [17.36334571]\n [ 1.89881357]]<br>2022-09-26 17:25:40.381660","GaussianStateUpdate<br>[[11.91236426]\n [ 0.94987862]\n [19.72498526]\n [ 2.01517599]]<br>2022-09-26 17:25:41.381660","GaussianStateUpdate<br>[[12.75042254]\n [ 0.84388133]\n [23.55214708]\n [ 2.43498735]]<br>2022-09-26 17:25:42.381660","GaussianStateUpdate<br>[[12.09938806]\n [ 0.44979446]\n [24.6604877 ]\n [ 2.20406566]]<br>2022-09-26 17:25:43.381660","GaussianStateUpdate<br>[[13.19818631]\n [ 0.59233588]\n [27.87973398]\n [ 2.41244651]]<br>2022-09-26 17:25:44.381660","GaussianStateUpdate<br>[[13.16662626]\n [ 0.46354799]\n [29.29841468]\n [ 2.20570007]]<br>2022-09-26 17:25:45.381660","GaussianStateUpdate<br>[[14.12523047]\n [ 0.51249666]\n [33.16287443]\n [ 2.59112863]]<br>2022-09-26 17:25:46.381660","GaussianStateUpdate<br>[[15.90209439]\n [ 0.79073407]\n [36.98247299]\n [ 2.81829623]]<br>2022-09-26 17:25:47.381660","GaussianStateUpdate<br>[[16.9080648 ]\n [ 0.77630772]\n [41.02185974]\n [ 3.12009792]]<br>2022-09-26 17:25:48.381660","GaussianStateUpdate<br>[[18.94139559]\n [ 1.08058153]\n [44.48707264]\n [ 3.12177803]]<br>2022-09-26 17:25:49.381660","GaussianStateUpdate<br>[[21.39495525]\n [ 1.34896704]\n [48.81657443]\n [ 3.35349752]]<br>2022-09-26 17:25:50.381660"],"x":[1.3360945422614938,1.9008963047273553,2.838808357885572,4.237179420728312,4.92065708041839,5.812066326317902,5.768257036819309,6.706787693725206,8.539077886904925,10.699723623705918,11.179326326493799,11.912364262727305,12.75042254448765,12.09938806414313,13.198186310370245,13.166626259390283,14.125230466084762,15.902094388970749,16.90806479835983,18.941395586818743,21.3949552512224],"y":[-0.14576745844812913,0.3108884679164402,3.8554779037697813,5.228944482501653,5.960233873646324,8.078700996622032,9.583636834655309,9.3570877830807,11.462963187986055,15.529763984217778,17.363345714003476,19.724985264915134,23.552147076537384,24.66048769946166,27.8797339762088,29.298414676755563,33.162874425093285,36.982472990221666,41.021859742978684,44.48707263518764,48.81657442839133],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":true,"x":[0.5613541805169181,0.5759058411588392,0.6196151769766973,0.692543140411964,0.7944064600126962,0.9238597279282936,1.0773337948542936,1.2477707696094404,1.4244185452793046,1.5948567552447512,1.7483302312856028,1.8777812176846838,1.9796439488401325,2.052573089211199,2.0962831691551473,2.1108349040060697,2.096283169155148,2.0525730892111995,1.979643948840133,1.8777812176846846,1.7483302312856044,1.5948567552447521,1.4244185452793061,1.2477707696094418,1.0773337948542947,0.9238597279282947,0.7944064600126978,0.6925431404119645,0.619615176976698,0.5759058411588395],"y":[-0.14576745844812908,0.07248527152584083,0.2846788873664834,0.48416021223346684,0.6631133983285531,0.8121705334169232,0.9206592082979105,0.9782541782126969,0.9782541396080183,0.9206584499025837,0.8121697306656074,0.6631154075249335,0.4841645594447853,0.2846817922761067,0.07248582276015306,-0.14576745844813507,-0.3640207396564097,-0.5762167091723625,-0.7756994763410421,-0.9546503244211902,-1.1037046475618641,-1.2121933667988414,-1.2697890565042762,-1.2697890951089554,-1.2121941251941695,-1.1037054503131827,-0.9546483152248135,-0.7756951291297264,-0.5762138042627435,-0.3640201884221004],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[2.627404583803273,2.6119179075684245,2.5710401876147673,2.5040814625087737,2.410095454242958,2.2885222667789913,2.140759276190178,1.9729309026453892,1.7978486397194855,1.6317655503192026,1.4872086256354144,1.3698952043602017,1.280861462917453,1.219297826433881,1.184084180163365,1.1743880256514374,1.1898750741866035,1.2307565298865069,1.2977220721799458,1.3917070597767154,1.5132679314726905,1.6610253095672802,1.8288602564290712,2.003942526905158,2.1700191634432278,2.3145816401986057,2.4319068824075742,2.520941362788845,2.5824984662199952,2.6177087254111004],"y":[0.30151193179388897,0.07733375179966176,-0.14173698055384243,-0.35017057964103804,-0.5408154761932579,-0.703842457831603,-0.8259463769324239,-0.8916552609879446,-0.8893953036703081,-0.8193721897467189,-0.6934978423984542,-0.5274068912064692,-0.33441080254586075,-0.12430744545342248,0.09575885501252251,0.3202650040389913,0.5444461310115446,0.763530325019897,0.9719748455617943,1.162608839015273,1.3256168061569693,1.4477184564856955,1.513431922991412,1.5111725506732503,1.441154187319674,1.3152774271060426,1.1491671499018234,0.9561601354325155,0.7460678720969491,0.5260151252155061],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[3.6096555504941925,3.5915151352158117,3.5482180741413005,3.478608891547654,3.380730072259665,3.252298262529028,3.0922716491797413,2.9054496871869557,2.708628844232869,2.52578488071664,2.3727102190766938,2.253186026323741,2.1654526507433998,2.1066843003904863,2.0746519790570663,2.0679611652769516,2.086102735830025,2.1293961927391716,2.1990143118325145,2.2968710442981606,2.425318404337504,2.585360851526804,2.7721614258707175,2.9689823284349024,3.1518471101247876,3.3049064505338204,3.424416421081102,3.512169731644801,3.5709304501545156,3.602965461931618],"y":[3.8384119156047176,3.58008903241306,3.326577298897661,3.0829932119400096,2.8563704459247288,2.65762147286022,2.5037361550524686,2.418458257499209,2.422817072673844,2.5162662335935164,2.6770949652425795,2.8813635102713238,3.112046971726342,3.358502721766179,3.613661546360902,3.8725438919348436,4.130876466839316,4.38436763427405,4.627981002595261,4.854555635974057,5.053334273760742,5.2072308236171,5.292496327167464,5.28814020449877,5.194677715170426,5.0338609053202585,4.829622684155194,4.598890159731914,4.352464057866525,4.097284527842386],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[5.005300981295463,4.9691503822934395,4.9096531252467575,4.825643721929154,4.714981186515107,4.574562469631986,4.401805474717651,4.200537683369236,3.992482094439797,3.8104893489728004,3.670260847105153,3.570058035682321,3.503971847906839,3.4670767999593317,3.456078574242563,3.4690578601611612,3.505212205772321,3.564707538508665,3.6487052344207354,3.759377554921068,3.899796051633512,4.072553448653639,4.27380630624961,4.481862627129943,4.663869562674091,4.804097750123155,4.904300740004909,4.970381809311857,5.007282641235005,5.018280172199694],"y":[5.161196085768976,4.883704706474851,4.611872076976139,4.350149126865288,4.105214408891544,3.887845778809946,3.71724497460115,3.6249590048457248,3.6433137097845223,3.7693990477163855,3.9676057042979482,4.206196938398564,4.466747571554281,4.739100465365322,5.017135840558383,5.296692879234329,5.5742058753798265,5.846023711825956,6.107713853810251,6.352674369256338,6.570042780456573,6.740644050159099,6.832927088435172,6.81458068225014,6.688489844114307,6.490283716223999,6.251692228082845,5.991168706894469,5.718781462215339,5.440731185522537],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[5.664779758169943,5.617240887540287,5.547939727656658,5.455787948494785,5.338652108873339,5.193274876433366,5.01644074829715,4.811303602008024,4.602568229529836,4.428323148781959,4.3022676160644036,4.218453539106952,4.168762337822008,4.147383706078054,4.150667194397849,4.176534402666836,4.224079684269863,4.29337721312368,4.3855219509836925,4.502661880063147,4.648038534802508,4.824873526428702,5.029987369082709,5.238724572062877,5.412991100674286,5.5390460622990965,5.62286053544891,5.67255040093007,5.693930751403675,5.690645338140791],"y":[5.863378227308252,5.582812833088099,5.308275059879422,5.043802370294711,4.795572452596984,4.574001126083079,4.398650156827201,4.304755501228232,4.3319318272667875,4.475199949584115,4.689976439279193,4.941378794256403,5.21133381986656,5.490562932638531,5.773671918331163,6.0570895199843955,6.3376854850084685,6.6122020265323105,6.876654840091508,7.124894982599885,7.3464656752492425,7.521817674356775,7.6157081136404,7.58854585098466,7.4452676874585215,7.230492414341623,6.979089298737108,6.70914520409434,6.429895075083631,6.146764635640452],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[6.532951187666881,6.4800532551292145,6.406413235949771,6.311013599797285,6.191798793472141,6.045581509148848,5.869070025017986,5.665257898504648,5.460028414828426,5.293045636432057,5.176434696519998,5.102260082719363,5.061607512033513,5.048421848925937,5.058980849440356,5.0911814649689235,5.144087286056605,5.217722680594222,5.313117781683239,5.432333653656296,5.578550119080916,5.755062740437839,5.958885112582219,6.164113604659452,6.331087099192953,6.447697359772329,6.5218724825424585,6.562524829745287,6.575710836436135,6.565149103694366],"y":[7.968479433821013,7.691784665137,7.421253505657108,7.160702812571276,6.916012449988187,6.697271603460443,6.523793668592007,6.431671467803595,6.4630472441341364,6.611866313417934,6.83016349485397,7.082600695725484,7.351737214443649,7.628876311568459,7.909027786617788,8.188922559423052,8.46565155605905,8.736158802053437,8.996696161284232,9.241389179330934,9.460129113853782,9.633608407234277,9.725732260154684,9.694349998444268,9.545535567305159,9.327240022128656,9.074801706224376,8.80566804007485,8.52851486316164,8.24833918528118],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[6.470012552503203,6.408051563064359,6.325999198642321,6.223001809753489,6.09726809452482,5.946058649561268,5.766884774666869,5.5640385856998735,5.364372330370418,5.206385069170296,5.100201191204741,5.036804025192181,5.006846551656602,5.004086893991695,5.024698441112825,5.066501521135415,5.128471449358636,5.210518434795292,5.313510774722212,5.439245765804639,5.590454386528928,5.769629412728009,5.972485875960532,6.17215090158512,6.33012908179058,6.436312360453886,6.4997099782702925,6.529667318793224,6.532426816785934,6.511811723434054],"y":[9.449142606050867,9.180378037276032,8.91841948801091,8.667046374365404,8.432097810599872,8.223573447399936,8.060495494612464,7.978017470340491,8.016280974318562,8.167917388257747,8.385686779458386,8.63534034372067,8.900130832512406,9.171758615922979,9.445468401581644,9.718131063259753,9.986928668473738,10.248864108650887,10.500224102180775,10.73517551246107,10.943699026305325,11.106778251439179,11.189257534041774,11.150987613787049,10.999356167690895,10.781588384347407,10.531933726170697,10.26714635390857,9.995504513330607,9.721771267329272],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[7.3951691796137125,7.32500851164166,7.235203236218959,7.125046443671196,6.99298522760903,6.836689340986173,6.654428321040625,6.451736279289017,6.25630720743014,6.105493199277507,6.007785825151462,5.95333301962257,5.932426006141932,5.9386460784226145,5.968059285887522,6.018406207836699,6.088576627839209,6.178375937129852,6.288526837438758,6.420589942673997,6.576885028655505,6.759147182048567,6.9618500810375,7.157277636259357,7.3080822613195,7.40578911603108,7.460242312914992,7.48114926767596,7.474928614196125,7.445511203817855],"y":[9.200465502937393,8.93790521140621,8.682773047863005,8.438847646211535,8.211978581295618,8.012145713554972,7.858180260946522,7.784367486053523,7.828828492581909,7.983075256780883,8.20074123900406,8.448523231130155,8.710200241645735,8.977758623910267,9.246607837861188,9.513710063224009,9.776301996649618,10.031412013439091,10.27532379335209,10.502196659249874,10.70202876315209,10.855995377118589,10.929809089004626,10.885341416599275,10.731100194523894,10.513435749722067,10.265652722551525,10.00397995620726,9.736406743823194,9.467534981946606],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[9.22144334537074,9.149093072118575,9.057139473897369,8.944965399925083,8.81118573135786,8.653776395547938,8.471624932403017,8.271098089733451,8.079299752947396,7.931512636944712,7.835946177829274,7.783395076972038,7.764420474778404,7.772666414090597,7.80419328870481,7.856712428439111,7.929071889688235,8.021019876973597,8.133185825620407,8.266969846665981,8.424378551045578,8.60653095650806,8.807035144275327,8.998836682740865,9.146643208600405,9.242209244126732,9.294760650395018,9.313735130755175,9.305488643969957,9.273957752729533],"y":[11.298620487371908,11.041784538298245,10.792701448255402,10.555218125148167,10.335272323390678,10.142866364980161,9.996554288472641,9.9290513390904,9.975251589853524,10.126636266059162,10.339835800384424,10.582808469229548,10.839553305776288,11.102047906029288,11.365663181293586,11.627305888600203,11.884170200432157,12.133233495218406,12.370699725746633,12.590653771707814,12.783059166103536,12.929372155030018,12.99687343304802,12.950686475941863,12.799289997384209,12.586091704446488,12.343118245955202,12.08638273121725,11.823869213315225,11.560233758816588],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[11.374213022234372,11.293588775723991,11.193419608918319,11.073313050369444,10.932274892244488,10.768969286394888,10.58360895631633,10.384370391030432,10.197992261853523,10.056456956037442,9.967079562552394,9.921106996494231,9.90924566992235,9.925075717071824,9.964542323094845,10.025234225177464,10.105867131913058,10.206030997006154,10.326125285110368,10.46717219061886,10.630477378777162,10.815838396481261,11.015058747074177,11.201439723289607,11.342990353316948,11.432367465161276,11.478340221028295,11.490201770771668,11.474370670336134,11.4349000982895],"y":[15.339767595335129,15.091747215898419,14.85243493410728,14.625831431895525,14.418077297328015,14.239286532409539,14.10761104690459,14.05321294547428,14.105719108788362,14.256103996572238,14.46517091343674,14.702912645630235,14.953754102186412,15.209705646713132,15.466099429574818,15.719760373100428,15.967804150688334,16.20710017031823,16.433681602706482,16.641450459472228,16.820240905461162,16.951916975075612,17.00631466965779,16.953818613363694,16.803423871184094,16.59435781146095,16.35661558921166,16.105791256032322,15.849814481929497,15.593404060657397],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[11.836269677622477,11.736897129586904,11.618448404047449,11.480980354822972,11.324232331229066,11.148091510670481,10.954941996078235,10.75581118191205,10.577715293204367,10.448875407232402,10.374341448324904,10.344773273587444,10.350461017321502,10.384598763123813,10.442804536332249,10.52238297536512,10.621764158232462,10.740207537594545,10.877657501960524,11.034420186578185,11.210560753967814,11.403710744368832,11.602827576827957,11.78092616822017,11.90977728994529,11.98431109949484,12.013879370827242,12.008193730133552,11.974052688143775,11.915842630677412],"y":[17.116860416388764,16.882108150868973,16.65798959046782,16.44868373674081,16.260560418766023,16.10382569708571,15.995973247961846,15.963846448446244,16.03067217584995,16.18584948361764,16.39413733032198,16.62805387669088,16.872880531780275,17.120923435367764,17.367630525048483,17.609831011618187,17.84460150411117,18.06870743000072,18.277987565236646,18.466130867489234,18.622865446131346,18.730718213009343,18.76284608400543,18.696027559914246,18.540841862030124,18.33255456764262,18.098637747004023,17.853835787950707,17.60576161715933,17.35904149453459],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[12.550898853281963,12.436638960666391,12.30400614467562,12.153363969069803,11.98492824235004,11.799349272164001,11.600297887900295,11.40058013709401,11.228178467454534,11.109944396084279,11.048815081969352,11.03406484862107,11.055223869294261,11.105052805281902,11.178890045953324,11.273829672172647,11.38809894349796,11.520725883368087,11.671347465477792,11.839800148614483,12.025378888757643,12.224430721731991,12.424135401485364,12.596540034242592,12.71478416604819,12.775913375731312,12.790663680381122,12.769508560288639,12.719674176209345,12.645832045187452],"y":[19.43533219500729,19.209134644808305,18.99488399284079,18.796774938432627,18.62120509167916,18.47834768814863,18.385336071031475,18.36764974816026,18.44585880408679,18.607770933660692,18.818806587848808,19.052537430248844,19.294942889125288,19.538748393981397,19.77965567853693,20.014638334822976,20.240852646953517,20.455091655265672,20.653175440726706,20.828765315699602,20.97162261260717,21.064634483743703,21.0823227346619,21.004120210871154,20.842199516401937,20.6311643671506,20.39743328143128,20.15505377318332,19.911216129097774,19.670296753720258],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.369534269611153,13.24127570918214,13.09545188118621,12.932672978118951,12.75352895476288,12.559265384306672,12.354558198028133,12.153770551143852,11.986327060267763,11.878495950796113,11.830935010176725,11.831119395580847,11.867652306554223,11.932836091400292,12.021749883039046,12.131310819364149,12.259579983762233,12.405397088162545,12.568154251132569,12.747315988143724,12.941579309010585,13.14628697872265,13.347061375819957,13.514508327669763,13.622349170484902,13.669910036469876,13.669725708958008,13.633198197649417,13.568007044604006,13.479087503919107],"y":[23.223587941991866,23.00449416165547,22.798427322780626,22.60953728341803,22.444182697298146,22.312479702657857,22.231361067285558,22.225683847759036,22.31454935228747,22.484004575920274,22.699000990851225,22.933700493515662,23.17476590998075,23.41541398494696,23.651667601424915,23.880706211082902,24.099816468595222,24.305871814817543,24.49473824299828,24.660111338122064,24.791814233742063,24.872933106187496,24.87861311116481,24.78975412823077,24.620289493029787,24.405293611335512,24.170593846472013,23.9295534739767,23.688874160742692,23.452608534424254],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[12.69189971350352,12.546031389876363,12.383724266143412,12.205853271573265,12.013406267866328,11.808271517047315,11.596238777883869,11.393633810610224,11.232298028112515,11.138271732212061,11.108880990593667,11.128869303077531,11.185526072301212,11.270568027391795,11.378774926661697,11.506876414782738,11.652757529385127,11.815056421950734,11.992905533232145,12.185369686818891,12.390504119526238,12.60253744857149,12.805128072785633,12.966468285101792,13.060504423652294,13.08989513259568,13.069906860080833,13.013256778496919,12.92820549410845,12.81999136911027],"y":[24.285234803219648,24.0745772369581,23.878134524405304,23.69995438232674,23.546298285093453,23.427196477745095,23.359453524684163,23.367675496110117,23.469858504726997,23.649495778185177,23.870139059328764,24.106498569531134,24.34618048927983,24.583117128536756,24.81380580979205,25.035740595703675,25.246415085993384,25.442845913973343,25.621005389624813,25.774676993174147,25.893778694324443,25.961521890150095,25.95330402444343,25.851128010360274,25.67147952518827,25.450836881090684,25.214477037908523,24.974817250482097,24.737851994032166,24.50715079143356],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.77588321542167,13.619940490912143,13.448277255020061,13.261814124112258,13.061594227561104,12.849619523815848,12.631949126074442,12.426012598410711,12.266517765497078,12.180733360658618,12.163085784621568,12.19574081640664,12.26492620226227,12.362001316383353,12.48162491461498,12.62048940531882,12.776447714020131,12.948100796768415,13.134544975012702,13.334778172095245,13.546752389630852,13.764423610722407,13.970342955588821,14.129843654742967,14.21563928628384,14.233286869787776,14.200631860749946,14.13145230367441,14.03436799945171,13.914735382287443],"y":[27.48295214692045,27.27421713139634,27.080028348419965,26.904306251443167,26.75319084415287,26.636687213267166,26.57188718559552,26.58461302439053,26.69416577060088,26.881797381799327,27.10822266574464,27.347888633124533,27.589023481967953,27.826110148808237,28.056020979195534,28.27651580549715,28.48527001779296,28.679445233426335,28.855150195717872,29.006276962800456,29.12278043108014,29.187580783380177,29.174860364982987,29.065316159760997,28.87767045635233,28.65124605741172,28.41157957785694,28.170461220658034,27.933350713873836,27.703425537128847],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.722041501687688,13.552732408054966,13.368632331281,13.170792431539576,12.960449525281133,12.739949178391258,12.516003394136607,12.307639447040847,12.152570151637544,12.078550082438742,12.07636055994927,12.125396834190935,12.210796584532508,12.323540257099511,12.458137451630613,12.611211017092877,12.780538759935808,12.964626547897957,13.162449942772518,13.372802725236347,13.593302397099936,13.817249252719408,14.025593620934432,14.180670447372409,14.254702456370143,14.256892070457335,14.207855770428546,14.122460909601045,14.009708122506424,13.875099857189332],"y":[28.870566817289326,28.667583593555815,28.479778567628703,28.310951152432402,28.16711862401539,28.058208846235285,28.0013696720367,28.022945181646563,28.142406059075558,28.338348902542386,28.569385987810364,28.810377365627375,29.050471464954406,29.284823769003893,29.51073773049601,29.7262625362218,29.929266412613824,30.11705674542121,30.285870378038663,30.429710569917656,30.538620142874763,30.595459694561992,30.573891366320275,30.454440265383912,30.25848032379378,30.02744437074933,29.78645228798694,29.54636969347345,29.3119979139138,29.086068321031444],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[14.665187479508058,14.486509263912394,14.29370037506513,14.087857799623361,13.870279839244104,13.64344815465318,13.414374948829018,13.203224619721386,13.050644641901533,12.985302806793209,12.994695373288055,13.055823610554848,13.152999915174503,13.276973912418857,13.42219328534789,13.585273452661465,13.763973454120519,13.956767856559292,14.162597447563648,14.380180773486877,14.607011525025566,14.836086118019002,15.047213924873107,15.199803325736369,15.265158139630365,15.255765769103947,15.194637437908094,15.097464013783958,14.97348206871216,14.828249534320946],"y":[32.716058793444056,32.51603096396262,32.33146164717296,32.16604237027433,32.02567828790356,31.92024473619919,31.86705035294418,31.893360934186894,32.01963079824707,32.22210838387567,32.45709059723225,32.699643075344405,32.93964819041079,33.17279258956556,33.39671419185417,33.609690056742515,33.80974047407398,33.9942936334446,34.1597023463861,34.30007038305308,34.40550366141478,34.458698508385204,34.4323968493067,34.30613837257949,34.10364033192608,33.86865956800628,33.62610612217513,33.3861070177881,33.15294788687022,32.929009030766544],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[16.416191036308614,16.223634865227602,16.017945144024985,15.80033560055734,15.572280453411308,15.336600582594027,15.100972255961198,14.887368058775381,14.740232153405113,14.688607375015073,14.715292219677048,14.794214891534871,14.908694813071653,15.049205070053588,15.210109126798438,15.387997741632882,15.5805798936294,15.78625216112978,16.00385289565698,16.23190794307248,16.467586515615697,16.703216652770603,16.916828406926474,17.06396068042864,17.115581407219082,17.08889695681085,17.00997404838008,16.895494127342648,16.754977612442918,16.594057514496807],"y":[36.505790419999144,36.31285246050558,36.13591595906375,35.97853978957878,35.8464845497264,35.749511198984166,35.70492940040131,35.740542160418826,35.876966409523064,36.08728374392609,36.325605091751235,36.56792588557544,36.80529066124614,37.034140002732585,37.25256924091099,37.45915556044419,37.65211768480642,37.82903677916708,37.986406006620015,38.11846123943031,38.21543425473235,38.26001658562909,38.22440033399219,38.08797216796013,37.87766210567807,37.639342603364305,37.3970204896655,37.15965561401721,36.93079696513018,36.712349010166314],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[16.4291868085033,16.637951500219337,16.858596137187398,17.089738658568255,17.329620035357788,17.57492332992023,17.81700084854927,18.031602649168903,18.17024925949134,18.20430840331806,18.156639108477584,18.05650880120273,17.921551878130945,17.76154315979509,17.582194609055577,17.386942788216363,17.178147430664445,16.95752359242613,16.72639000466621,16.486510004516465,16.241208433055494,15.999128635896282,15.784522917270593,15.645878476623437,15.611821199411715,15.659489803314276,15.759620577642531,15.894578307035458,16.054593872948015,16.233961774564605],"y":[41.534435286779114,41.71590447087153,41.88067135852909,42.02532671751526,42.14427156009073,42.22793990442943,42.25924426014924,42.21050355031469,42.0621028683573,41.84468287304438,41.605287253076575,41.366232624053076,41.13498222083047,40.91420335272082,40.70527470973514,40.50928419917825,40.32779025317964,40.16304134570772,40.01839224216229,39.899448114086255,39.81578012061614,39.78447522742489,39.83321807483064,39.98162078382533,40.19903672503775,40.4384301082266,40.67748643255205,40.908738160724724,41.129525517109556,41.33847369001564],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[18.49949094896934,18.724834741295794,18.9607686487029,19.20580215404653,19.457967279470083,19.713580276334767,19.963188077779215,20.18011057941615,20.310274023082982,20.32496053544043,20.254382572603234,20.131568750531986,19.9750561043687,19.794756282284467,19.596311516008328,19.383300224668147,19.157987700958934,18.922010765223504,18.676987742092138,18.424824420658105,18.169213955000345,17.91960305094567,17.702682263201975,17.572517792929396,17.557830644694302,17.62840739215748,17.751222130002528,17.907735939466868,18.088044176042754,18.286451735007617],"y":[45.03174173571379,45.201994678714215,45.355064583690165,45.48772162940919,45.594560250575675,45.66623435407419,45.685789237214976,45.625093601972104,45.46465973609859,45.23988702434882,44.9996646876284,44.7643126223325,44.53958066999479,44.327155501741615,44.127796399122225,43.94240353466149,43.77217254132845,43.61907367503442,43.48642302073311,43.379585208447864,43.307911507713044,43.2883560359796,43.349050660430116,43.509483693390905,43.734258290555864,43.974477712572686,44.20983217173273,44.434565722631554,44.646999830869326,44.84632279748215],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[20.99233771961619,21.233492717654844,21.483940785325796,21.74208224539458,22.005732951167843,22.270824929023924,22.527069144972597,22.74530967322335,22.865801959478496,22.860329735786074,22.766829821123466,22.621750451936798,22.444289564208546,22.244392316231767,22.02764290920492,21.797572782828606,21.556446996994303,21.3059560141747,21.047826579365346,20.78417814786893,20.51908968941396,20.262841435756304,20.04460214955753,19.9241089415145,19.92958074834013,20.02307874843749,20.16815968296642,20.345622157150533,20.545529436668794,20.76224101732844],"y":[49.390907092502744,49.54819774077213,49.68787890314176,49.806893667981164,49.900034183116,49.95820578792085,49.96471509424585,49.89137131867634,49.719488464286364,49.48931978899079,49.25064990824241,49.02128609713304,48.80520017990298,48.60312368966736,48.415285602682005,48.24224176427991,48.08496878991516,47.94526295648334,47.82625450073484,47.73311484823432,47.67494363194829,47.66843375362662,47.74177663520969,47.913658843409834,48.14382899116144,48.382495271255166,48.61186225834231,48.82795001938114,49.03003566274017,49.21784181953232],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 176-183

The UT in slightly more depth
-----------------------------
Now try and get a sense of what actually happens to the uncertainty when a non-linear combination
of functions happens. Instead of deriving this analytically (and potentially getting bogged-down
in the maths), let's just use a sampling method.
We can start with a prediction, which is Gauss-distributed in state space, that we will use to
make our measurement predictions from.

.. GENERATED FROM PYTHON SOURCE LINES 183-188

.. code-block:: default

    from smartfusion.types.prediction import GaussianStatePrediction
    prediction = GaussianStatePrediction(state_vector=[[0], [0], [20], [0]],
                                         covar=np.diag([1.5, 0.5, 1.5, 0.5]),
                                         timestamp=datetime.now())








.. GENERATED FROM PYTHON SOURCE LINES 189-191

We'll recapitulate the fact that the sensor position is where it previously was. But this time
we'll make the measurement much noisier.

.. GENERATED FROM PYTHON SOURCE LINES 191-201

.. code-block:: default

    sensor_x = 0
    sensor_y = 0

    measurement_model = CartesianToBearingRange(
        ndim_state=4,
        mapping=(0, 2),
        noise_covar=np.diag([np.radians(5), 0.1]),  # bearing variance = 5 degrees (accurate range)
        translation_offset=np.array([[sensor_x], [sensor_y]])
    )








.. GENERATED FROM PYTHON SOURCE LINES 202-206

The next tutorial will go into much more detail on sampling methods. For the moment we'll just
assert that we're generating 2000 points from the state prediction above.

We need these imports and parameters:

.. GENERATED FROM PYTHON SOURCE LINES 206-230

.. code-block:: default

    from scipy.stats import multivariate_normal

    from smartfusion.types.particle import Particle
    from smartfusion.types.numeric import Probability  # Similar to a float type
    from smartfusion.types.state import ParticleState

    number_particles = 2000

    # Sample from the Gaussian prediction distribution
    samples = multivariate_normal.rvs(prediction.state_vector.ravel(),
                                      prediction.covar,
                                      size=number_particles)
    particles = [
        Particle(sample.reshape(-1, 1), weight=Probability(1/number_particles)) for sample in samples]
    # Create prior particle state.
    pred_samples = ParticleState(None, particle_list=particles, timestamp=start_time)

    from smartfusion.resampler.particle import SystematicResampler
    resampler = SystematicResampler()
    from smartfusion.updater.particle import ParticleUpdater
    pupdater = ParticleUpdater(measurement_model, resampler)

    predict_meas_samples = pupdater.predict_measurement(pred_samples)








.. GENERATED FROM PYTHON SOURCE LINES 231-235

Don't worry what all this means for the moment. It's a convenient way of showing the 'true'
distribution of the predicted measurement - which is rendered as a blue cloud. Note that
no noise is added by the :meth:`~.UnscentedKalmanUpdater.predict_measurement` method so we add
some noise below. This is additive Gaussian in the sensor coordinates.

.. GENERATED FROM PYTHON SOURCE LINES 235-253

.. code-block:: default

    from matplotlib import pyplot as plt
    fig = plt.figure(figsize=(10, 6), tight_layout=True)
    ax = fig.add_subplot(1, 1, 1, polar=True)
    ax.set_ylim(0, 30)
    ax.set_xlim(0, np.radians(180))

    data = np.array([particle.state_vector for particle in predict_meas_samples.particles])
    noise = multivariate_normal.rvs(np.array([0, 0]), measurement_model.covar(), size=len(data))

    ax.plot(data[:, 0].ravel()+noise[:, 0],
            data[:, 1].ravel()+noise[:, 1],
            linestyle='',
            marker=".",
            markersize=1.5,
            alpha=0.4,
            label="Particles")
    ax.legend()




.. image-sg:: /auto_tutorials/fundamentals/images/sphx_glr_03_UnscentedKalmanFilterTutorial_001.png
   :alt: 03 UnscentedKalmanFilterTutorial
   :srcset: /auto_tutorials/fundamentals/images/sphx_glr_03_UnscentedKalmanFilterTutorial_001.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 254-257

We can now see what happens when we create EKF and UKF updaters and compare their effect.

Create updaters:

.. GENERATED FROM PYTHON SOURCE LINES 257-265

.. code-block:: default

    from smartfusion.updater.kalman import UnscentedKalmanUpdater, ExtendedKalmanUpdater
    unscented_updater = UnscentedKalmanUpdater(measurement_model, alpha=0.5, beta=4)
    extended_updater = ExtendedKalmanUpdater(measurement_model)

    # Get predicted measurements from the state prediction.
    ukf_pred_meas = unscented_updater.predict_measurement(prediction)
    ekf_pred_meas = extended_updater.predict_measurement(prediction)








.. GENERATED FROM PYTHON SOURCE LINES 266-267

Plot UKF (red) and EKF (green) predicted measurement distributions.

.. GENERATED FROM PYTHON SOURCE LINES 267-301

.. code-block:: default


    # Plot UKF's predicted measurement distribution
    from matplotlib.patches import Ellipse
    from smartfusion.plotter import Plotter
    w, v = np.linalg.eig(ukf_pred_meas.covar)
    max_ind = np.argmax(w)
    min_ind = np.argmin(w)
    orient = np.arctan2(v[1, max_ind], v[0, max_ind])
    ukf_ellipse = Ellipse(xy=(ukf_pred_meas.state_vector[0], ukf_pred_meas.state_vector[1]),
                          width=2*np.sqrt(w[max_ind]), height=2*np.sqrt(w[min_ind]),
                          angle=np.rad2deg(orient),
                          alpha=0.4,
                          color='r',)
    ax.add_artist(ukf_ellipse)


    # Plot EKF's predicted measurement distribution
    w, v = np.linalg.eig(ekf_pred_meas.covar)
    max_ind = np.argmax(w)
    min_ind = np.argmin(w)
    orient = np.arctan2(v[1, max_ind], v[0, max_ind])
    ekf_ellipse = Ellipse(xy=(ekf_pred_meas.state_vector[0], ekf_pred_meas.state_vector[1]),
                          width=2*np.sqrt(w[max_ind]), height=2*np.sqrt(w[min_ind]),
                          angle=np.rad2deg(orient),
                          alpha=0.5,
                          color='g',)
    ax.add_artist(ekf_ellipse)

    # Add ellipses to legend
    label_list = ["UKF Prediction", "EKF Prediction"]
    color_list = ['r', 'g']
    Plotter.ellipse_legend(ax, label_list, color_list)
    fig




.. image-sg:: /auto_tutorials/fundamentals/images/sphx_glr_03_UnscentedKalmanFilterTutorial_002.png
   :alt: 03 UnscentedKalmanFilterTutorial
   :srcset: /auto_tutorials/fundamentals/images/sphx_glr_03_UnscentedKalmanFilterTutorial_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 302-306

You may have to spend some time fiddling with the parameters to see major differences between the
EKF and UKF. Indeed the point to make is not that there is any great magic about the UKF. Its
power is that it harnesses some extra free parameters to give a more flexible description of the
transformed distribution.

.. GENERATED FROM PYTHON SOURCE LINES 308-312

Key points
----------
1. The unscented Kalman filter offers a powerful alternative to the EKF when undertaking tracking
   in non-linear regimes.

.. GENERATED FROM PYTHON SOURCE LINES 314-322

References
----------
.. [#] Julier S., Uhlmann J., Durrant-Whyte H.F. 2000, A new method for the nonlinear
       transformation of means and covariances in filters and estimators," in IEEE Transactions
       on Automatic Control, vol. 45, no. 3, pp. 477-482, doi: 10.1109/9.847726.
.. [#] Julier S.J. 2002, The scaled unscented transformation, Proceedings of the 2002 American
       Control Conference (IEEE Cat. No.CH37301), Anchorage, AK, USA, 2002, pp. 4555-4559 vol.6,
       doi: 10.1109/ACC.2002.1025369.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.616 seconds)


.. _sphx_glr_download_auto_tutorials_fundamentals_03_UnscentedKalmanFilterTutorial.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example


    .. container:: binder-badge

      .. image:: images/binder_badge_logo.svg
        :target: https://mybinder.org/v2/gh/claycurry34/Smart-Fusion/main?filepath=notebooks/auto_tutorials/fundamentals/03_UnscentedKalmanFilterTutorial.ipynb
        :alt: Launch binder
        :width: 150 px

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 03_UnscentedKalmanFilterTutorial.py <03_UnscentedKalmanFilterTutorial.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 03_UnscentedKalmanFilterTutorial.ipynb <03_UnscentedKalmanFilterTutorial.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
