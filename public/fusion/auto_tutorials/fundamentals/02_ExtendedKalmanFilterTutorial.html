<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2 - Non-linear models: extended Kalman filter &mdash; SMART FUSION 0.1b11.dev6+g9121db30.d20220926 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="3 - Non-linear models: unscented Kalman filter" href="03_UnscentedKalmanFilterTutorial.html" />
    <link rel="prev" title="1 - An introduction to SMART FUSION: using the Kalman filter" href="01_KalmanFilterTutorial.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> SMART FUSION
            <img src="../../_static/smart_fusion_logo.jpeg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1b11.dev6+g9121db30.d20220926
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../design.html">Framework </a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#fundamentals">Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#more-examples">More Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#sensor-management">Sensor Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#state-estimation">State Estimation</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Fundamentals</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="01_KalmanFilterTutorial.html">1 - An introduction to SMART FUSION: using the Kalman filter</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">2 - Non-linear models: extended Kalman filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="03_UnscentedKalmanFilterTutorial.html">3 - Non-linear models: unscented Kalman filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="04_ParticleFilter.html">4 - Sampling methods: particle filter</a></li>
<li class="toctree-l4"><a class="reference internal" href="05_DataAssociation-Clutter.html">5 - Data association - clutter tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="06_DataAssociation-MultiTargetTutorial.html">6 - Data association - multi-target tracking tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="07_PDATutorial.html">7 - Probabilistic data association tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="08_JPDATutorial.html">8 - Joint probabilistic data association tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="09_Initiators_%26_Deleters.html">9 - Initiators &amp; Deleters</a></li>
<li class="toctree-l4"><a class="reference internal" href="10_Simulation_%26_Tracking_Components.html">10 - Tracking in simulation: bringing all components together</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../moreexamples/index.html">More Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sensormanagement/index.html">Sensor Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stateestimation/index.html">State Estimation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../smartfusion.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_demos/index.html">Demonstrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright &amp; License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SMART FUSION</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
          <li><a href="index.html">Fundamentals</a> &raquo;</li>
      <li>2 - Non-linear models: extended Kalman filter</li>
  
    
    
      
    
  
  <li class="wy-breadcrumbs-aside">
    <a href="https://github.com/claycurry34/Smart-Fusion/blob/main/docs/source/../tutorials/fundamentals/02_ExtendedKalmanFilterTutorial.py" class="fa fa-github"> Edit on GitHub</a>
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-tutorials-fundamentals-02-extendedkalmanfiltertutorial-py"><span class="std std-ref">here</span></a>
to download the full example code or to run this example in your browser via Binder</p>
</div>
<section class="sphx-glr-example-title" id="non-linear-models-extended-kalman-filter">
<span id="sphx-glr-auto-tutorials-fundamentals-02-extendedkalmanfiltertutorial-py"></span><h1>2 - Non-linear models: extended Kalman filter<a class="headerlink" href="#non-linear-models-extended-kalman-filter" title="Permalink to this heading"></a></h1>
<p>As well as introducing various aspects of the SMART FUSION framework, the previous tutorial
detailed the use of a Kalman filter. A significant problem in using the Kalman filter is that it
requires transition and sensor models to be linear-Gaussian. In practice, many models are not
like this and so alternatives are required. We examine the most commonly-used of such
alternatives, the extended Kalman filter <a class="footnote-reference brackets" href="#id2" id="id1">1</a> (EKF), in this tutorial.</p>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this heading"></a></h2>
<p>Recall that the Kalman filter makes the following linear assumptions of the predicted state and
predicted measurement:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{x}_{k|k-1} &amp;= F_{k} \mathbf{x}_{k-1} + B_{k}\mathbf{u}_{k}\\
\mathbf{z}_{k|k-1} &amp;= H_{k} \mathbf{x}_{k|k-1}\end{split}\]</div>
<p>The EKF gets round the fact that <span class="math notranslate nohighlight">\(f(\cdot)\)</span> and <span class="math notranslate nohighlight">\(h(\cdot)\)</span> are not of this form by
making linear approximations about <span class="math notranslate nohighlight">\(\mathbf{x}_{k−1} = \boldsymbol{\mu}_{k−1}\)</span> or
<span class="math notranslate nohighlight">\(\mathbf{x}_{k|k−1} = \boldsymbol{\mu}_{k|k−1}\)</span>. It does this by way of a Taylor expansion,</p>
<div class="math notranslate nohighlight">
\[g(\mathbf{x})\rvert_{\mathbf{x}=\boldsymbol{\mu}} \approx \sum\limits_{|\alpha| \ge 0}
\frac{(\mathbf{x} - \boldsymbol{\mu})^{\alpha}}{\alpha !}
(\mathcal{D}^{\alpha} g)(\boldsymbol{\mu})\]</div>
<p>This is usually truncated after the first term, meaning that either
<span class="math notranslate nohighlight">\(\tilde{F}(\mathbf{x}_{k-1}) \approx J(f)\rvert_{\mathbf{x}=\boldsymbol{\mu}_{k-1}}\)</span> or
<span class="math notranslate nohighlight">\(\tilde{H}(\mathbf{x}_{k|k-1}) \approx J(h)\rvert_{\mathbf{x}=\boldsymbol{\mu}_{k|k-1}}\)</span>
or both, where <span class="math notranslate nohighlight">\(J(\cdot)\)</span> is the Jacobian matrix. The calculation of the covariances,
including the innovation covariance, then proceeds in exactly the same way as in the Kalman
filter using these approximations,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{x}_{k|k-1} &amp;= f_{k}(\mathbf{x}_{k-1}) \\
P_{k|k-1} &amp;= \tilde{F}_{k}P_{k-1}\tilde{F}_{k}^T + Q_{k}\\
\mathbf{x}_{k} &amp;= \mathbf{x}_{k|k-1} +
                  \tilde{K}_k(\mathbf{z}_k - h_k(\mathbf{x}_{k|k-1}))\\
P_{k} &amp;= P_{k|k-1} - \tilde{K}_k \tilde{H}_{k} P_{k|k-1}\\\end{split}\]</div>
<p>where,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\tilde{K}_k &amp;= P_{k|k-1} \tilde{H}_{k}^T \tilde{S}_k^{-1}\\
\tilde{S}_k &amp;= \tilde{H}_{k} P_{k|k-1} \tilde{H}_{k}^T + R_{k}\end{split}\]</div>
<p>(we omit the control term in this analysis but it also can be incorporated as a non-linear
approximation of the same form.)</p>
<p>SMART FUSION implements the EKF
for non-linear functions using a finite difference method to find <span class="math notranslate nohighlight">\(J(\cdot)\)</span>
in the appropriate places. We’ll now see this in action.</p>
</section>
<section id="nearly-constant-velocity-example">
<h2>Nearly-constant velocity example<a class="headerlink" href="#nearly-constant-velocity-example" title="Permalink to this heading"></a></h2>
<p>We’re going to use the same target model as previously, but this time we use a non-linear sensor
model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="datetime.timedelta" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class"><span class="n">timedelta</span></a>
<a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.seed.html#numpy.random.seed" title="numpy.random.seed" class="sphx-glr-backref-module-numpy-random sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span></a><span class="p">(</span><span class="mi">1991</span><span class="p">)</span>
</pre></div>
</div>
<section id="create-a-target">
<h3>Create a target<a class="headerlink" href="#create-a-target" title="Permalink to this heading"></a></h3>
<p>As in the previous tutorial, the target moves with near constant velocity NE from 0,0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.models.transition.linear</span> <span class="kn">import</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">CombinedLinearGaussianTransitionModel</span></a><span class="p">,</span> \
    <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.groundtruth</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class"><span class="n">GroundTruthPath</span></a><span class="p">,</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthState" title="smartfusion.types.groundtruth.GroundTruthState" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class"><span class="n">GroundTruthState</span></a>
<a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a> <span class="o">=</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">CombinedLinearGaussianTransitionModel</span></a><span class="p">([</span><a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">(</span><span class="mf">0.05</span><span class="p">),</span>
                                                          <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">(</span><span class="mf">0.05</span><span class="p">)])</span>
<a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class"><span class="n">GroundTruthPath</span></a><span class="p">([</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthState" title="smartfusion.types.groundtruth.GroundTruthState" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class"><span class="n">GroundTruthState</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a><span class="p">)])</span>

<span class="k">for</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">k</span></a> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">):</span>
    <a href="../../smartfusion.types.html#smartfusion.types.state.StateMutableSequence.append" title="smartfusion.types.state.StateMutableSequence.append" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-method"><span class="n">truth</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthState" title="smartfusion.types.groundtruth.GroundTruthState" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class"><span class="n">GroundTruthState</span></a><span class="p">(</span>
        <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel.function" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel.function" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-method"><span class="n">transition_model</span><span class="o">.</span><span class="n">function</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a><span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">k</span></a><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">noise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">time_interval</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="datetime.timedelta" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class"><span class="n">timedelta</span></a><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
        <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a><span class="o">+</span><a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="datetime.timedelta" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class"><span class="n">timedelta</span></a><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">k</span></a><span class="p">)))</span>
</pre></div>
</div>
<p>Plot this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.plotter</span> <span class="kn">import</span> <a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class"><span class="n">Plotterly</span></a>
<a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">plotter</span></a> <span class="o">=</span> <a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class"><span class="n">Plotterly</span></a><span class="p">()</span>
<a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly.plot_ground_truths" title="smartfusion.plotter.Plotterly.plot_ground_truths" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-method"><span class="n">plotter</span><span class="o">.</span><span class="n">plot_ground_truths</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">plotter</span></a><span class="o">.</span><span class="n">fig</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="7ec94513-f726-4dbe-8412-b6013cb826bb" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("7ec94513-f726-4dbe-8412-b6013cb826bb")) {                    Plotly.newPlot(                        "7ec94513-f726-4dbe-8412-b6013cb826bb",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.001316","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.001316","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.001316","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.001316","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.001316","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.001316","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.001316","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.001316","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.001316","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.001316","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.001316","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.001316","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.001316","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.001316","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.001316","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.001316","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.001316","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.001316","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.001316","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.001316","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.001316"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
<br />
<br /></section>
<section id="a-bearing-range-sensor">
<h3>A bearing-range sensor<a class="headerlink" href="#a-bearing-range-sensor" title="Permalink to this heading"></a></h3>
<p>We’re going to simulate a 2d bearing-range sensor. An example of this is available in SMART FUSION
via the <a class="reference internal" href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">CartesianToBearingRange</span></code></a> class. As the name suggests, this takes the Cartesian
state input and returns a relative bearing and range to target. Specifically,</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{bmatrix}
\theta\\
r\\
\end{bmatrix}
=
\begin{bmatrix}
\arctan\left(\frac{y-y_p}{x-x_p}\right)\\
\sqrt{(x-x_p)^2 + (y-y_p)^2}
\end{bmatrix}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(x_p,y_p\)</span> is the 2d Cartesian position of the sensor and <span class="math notranslate nohighlight">\(x,y\)</span> that of the
target. Note also that the arctan function has to resolve the quadrant ambiguity and so is
implemented as the <code class="xref py py-class docutils literal notranslate"><span class="pre">arctan2</span></code><span class="math notranslate nohighlight">\((y,x)\)</span> function in Python.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.models.measurement.nonlinear</span> <span class="kn">import</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class"><span class="n">CartesianToBearingRange</span></a>
<a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sensor_x</span></a> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Placing the sensor off-centre</span>
<a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sensor_y</span></a> <span class="o">=</span> <span class="mi">0</span>

<a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement_model</span></a> <span class="o">=</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class"><span class="n">CartesianToBearingRange</span></a><span class="p">(</span>
    <span class="n">ndim_state</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">mapping</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">noise_covar</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">([</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">radians</span></a><span class="p">(</span><span class="mf">0.2</span><span class="p">),</span> <span class="mi">1</span><span class="p">]),</span>  <span class="c1"># Covariance matrix. 0.2 degree variance in</span>
    <span class="c1"># bearing and 1 metre in range</span>
    <span class="n">translation_offset</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sensor_x</span></a><span class="p">],</span> <span class="p">[</span><a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sensor_y</span></a><span class="p">]])</span>  <span class="c1"># Offset measurements to location of</span>
    <span class="c1"># sensor in cartesian.</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We create a set of detections using this sensor model.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.types.detection</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class"><span class="n">Detection</span></a>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurements</span></a> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthState" title="smartfusion.types.groundtruth.GroundTruthState" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">state</span></a> <span class="ow">in</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a><span class="p">:</span>
    <a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement</span></a> <span class="o">=</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange.function" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange.function" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-method"><span class="n">measurement_model</span><span class="o">.</span><span class="n">function</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthState" title="smartfusion.types.groundtruth.GroundTruthState" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">state</span></a><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurements</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class"><span class="n">Detection</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement</span></a><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">state</span><span class="o">.</span><span class="n">timestamp</span></a><span class="p">,</span>
                                  <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement_model</span></a><span class="o">=</span><a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement_model</span></a><span class="p">))</span>
</pre></div>
</div>
<p>Plot the measurements. Where the model is nonlinear the plotting function uses the inverse
function to get coordinates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly.plot_measurements" title="smartfusion.plotter.Plotterly.plot_measurements" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-method"><span class="n">plotter</span><span class="o">.</span><span class="n">plot_measurements</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurements</span></a><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">plotter</span></a><span class="o">.</span><span class="n">fig</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="49f85577-59a1-4181-8027-3a48db57a841" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("49f85577-59a1-4181-8027-3a48db57a841")) {                    Plotly.newPlot(                        "49f85577-59a1-4181-8027-3a48db57a841",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.001316","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.001316","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.001316","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.001316","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.001316","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.001316","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.001316","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.001316","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.001316","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.001316","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.001316","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.001316","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.001316","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.001316","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.001316","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.001316","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.001316","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.001316","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.001316","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.001316","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.001316"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"},{"legendgroup":"Measurements<br>(Detections)","legendrank":200,"marker":{"color":"#636EFA"},"mode":"markers","name":"Measurements<br>(Detections)","showlegend":true,"text":["Detection<br>[[Bearing(2.515900984981293)]\n [45.03578875479237]]<br>2022-09-26 17:25:42.001316","Detection<br>[[Bearing(2.645421155733226)]\n [41.82268473115909]]<br>2022-09-26 17:25:39.001316","Detection<br>[[Bearing(2.6675764047046098)]\n [45.84408657411932]]<br>2022-09-26 17:25:43.001316","Detection<br>[[Bearing(-3.1217136817127424)]\n [47.7876225398533]]<br>2022-09-26 17:25:30.001316","Detection<br>[[Bearing(2.5236104370654777)]\n [46.9982845683127]]<br>2022-09-26 17:25:45.001316","Detection<br>[[Bearing(2.9452471282335875)]\n [46.2161839747064]]<br>2022-09-26 17:25:36.001316","Detection<br>[[Bearing(3.037053677683474)]\n [45.71541374605071]]<br>2022-09-26 17:25:33.001316","Detection<br>[[Bearing(2.9878623947562133)]\n [43.60243560034166]]<br>2022-09-26 17:25:37.001316","Detection<br>[[Bearing(2.903665081663336)]\n [47.21145298695907]]<br>2022-09-26 17:25:32.001316","Detection<br>[[Bearing(3.044767462908764)]\n [45.74123179494575]]<br>2022-09-26 17:25:34.001316","Detection<br>[[Bearing(2.6573352109597863)]\n [43.4437023789485]]<br>2022-09-26 17:25:41.001316","Detection<br>[[Bearing(2.937703488743674)]\n [45.10212036890871]]<br>2022-09-26 17:25:35.001316","Detection<br>[[Bearing(2.435714315241148)]\n [46.21798149747487]]<br>2022-09-26 17:25:44.001316","Detection<br>[[Bearing(-3.096461688413128)]\n [48.50034235672541]]<br>2022-09-26 17:25:31.001316","Detection<br>[[Bearing(2.751748017042739)]\n [43.40696995272662]]<br>2022-09-26 17:25:40.001316","Detection<br>[[Bearing(2.0193429860239256)]\n [56.73700365375307]]<br>2022-09-26 17:25:50.001316","Detection<br>[[Bearing(2.2168669078367147)]\n [53.473621879810885]]<br>2022-09-26 17:25:48.001316","Detection<br>[[Bearing(2.32606487631801)]\n [49.55028147242189]]<br>2022-09-26 17:25:46.001316","Detection<br>[[Bearing(2.825754941593946)]\n [42.16978735715047]]<br>2022-09-26 17:25:38.001316","Detection<br>[[Bearing(2.2312923796610526)]\n [50.16616524252715]]<br>2022-09-26 17:25:47.001316","Detection<br>[[Bearing(2.113687859118837)]\n [53.696127508762395]]<br>2022-09-26 17:25:49.001316"],"x":[13.495870684052178,13.220645587904379,9.210581625879023,2.221819350783221,11.694085658745927,4.671810836553469,4.534156951991264,6.911778516695591,4.1185639808006655,4.473015456288891,11.551415784923044,5.832101951594851,14.826171916953918,1.549042106302693,9.849936778112081,25.395634186662065,17.806013715912904,16.034063908529554,9.91607756750875,19.22262346395934,22.259832475318465],"y":[26.375572252575715,19.91019957588045,20.926146862627856,-0.9499062386905731,27.230418264224387,9.016148199021414,4.770342745174409,6.676642845595845,11.127224359918513,4.421986485240061,20.2252725135359,9.132252939840118,29.98172162643846,-2.188124288687379,16.496589458288486,51.12448304412903,42.696316985016416,36.07693971814103,13.098478086148486,39.61561849446898,45.97561544057756],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
<br />
<br /></section>
<section id="set-up-the-extended-kalman-filter-elements">
<h3>Set up the extended Kalman filter elements<a class="headerlink" href="#set-up-the-extended-kalman-filter-elements" title="Permalink to this heading"></a></h3>
<p>Analogously to the Kalman filter, we now create the predictor and updater. As is our custom
the predictor takes a transition model and the updater a measurement model. Note that if either
of these models are linear then the extended predictor/updater defaults to its Kalman equivalent.
In fact the extended Kalman filter classes inherit nearly all of their functionality from the
Kalman classes. The only difference being that instead of returning a matrix, in the extended
version the <code class="xref py py-meth docutils literal notranslate"><span class="pre">matrix()</span></code> function returns the Jacobian.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.predictor.kalman</span> <span class="kn">import</span> <a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.ExtendedKalmanPredictor" title="smartfusion.predictor.kalman.ExtendedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class"><span class="n">ExtendedKalmanPredictor</span></a>
<a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.ExtendedKalmanPredictor" title="smartfusion.predictor.kalman.ExtendedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">predictor</span></a> <span class="o">=</span> <a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.ExtendedKalmanPredictor" title="smartfusion.predictor.kalman.ExtendedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class"><span class="n">ExtendedKalmanPredictor</span></a><span class="p">(</span><a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a><span class="p">)</span>

<span class="kn">from</span> <span class="nn">smartfusion.updater.kalman</span> <span class="kn">import</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.ExtendedKalmanUpdater" title="smartfusion.updater.kalman.ExtendedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class"><span class="n">ExtendedKalmanUpdater</span></a>
<a href="../../smartfusion.updater.html#smartfusion.updater.kalman.ExtendedKalmanUpdater" title="smartfusion.updater.kalman.ExtendedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">updater</span></a> <span class="o">=</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.ExtendedKalmanUpdater" title="smartfusion.updater.kalman.ExtendedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class"><span class="n">ExtendedKalmanUpdater</span></a><span class="p">(</span><a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement_model</span></a><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-the-extended-kalman-filter">
<h3>Run the extended Kalman filter<a class="headerlink" href="#run-the-extended-kalman-filter" title="Permalink to this heading"></a></h3>
<p>First, we’ll create a prior state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.types.state</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a>
<a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prior</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span> <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Next iterate over hypotheses and place in a track.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.types.hypothesis</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class"><span class="n">SingleHypothesis</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.track</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class"><span class="n">Track</span></a>

<a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class"><span class="n">Track</span></a><span class="p">()</span>
<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurements</span></a><span class="p">:</span>
    <a href="../../smartfusion.types.html#smartfusion.types.prediction.GaussianStatePrediction" title="smartfusion.types.prediction.GaussianStatePrediction" class="sphx-glr-backref-module-smartfusion-types-prediction sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prediction</span></a> <span class="o">=</span> <a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.KalmanPredictor.predict" title="smartfusion.predictor.kalman.KalmanPredictor.predict" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-method"><span class="n">predictor</span><span class="o">.</span><span class="n">predict</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prior</span></a><span class="p">,</span> <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement</span><span class="o">.</span><span class="n">timestamp</span></a><span class="p">)</span>
    <a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">hypothesis</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class"><span class="n">SingleHypothesis</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.prediction.GaussianStatePrediction" title="smartfusion.types.prediction.GaussianStatePrediction" class="sphx-glr-backref-module-smartfusion-types-prediction sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prediction</span></a><span class="p">,</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.Detection" title="smartfusion.types.detection.Detection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">measurement</span></a><span class="p">)</span>  <span class="c1"># Group a prediction and measurement</span>
    <a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">post</span></a> <span class="o">=</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.KalmanUpdater.update" title="smartfusion.updater.kalman.KalmanUpdater.update" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-method"><span class="n">updater</span><span class="o">.</span><span class="n">update</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">hypothesis</span></a><span class="p">)</span>
    <a href="../../smartfusion.types.html#smartfusion.types.track.Track.append" title="smartfusion.types.track.Track.append" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-method"><span class="n">track</span><span class="o">.</span><span class="n">append</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">post</span></a><span class="p">)</span>
    <a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prior</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Plot the resulting track complete with error ellipses at each estimate.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly.plot_tracks" title="smartfusion.plotter.Plotterly.plot_tracks" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-method"><span class="n">plotter</span><span class="o">.</span><span class="n">plot_tracks</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">uncertainty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a href="../../smartfusion.plotter.html#smartfusion.plotter.Plotterly" title="smartfusion.plotter.Plotterly" class="sphx-glr-backref-module-smartfusion-plotter sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">plotter</span></a><span class="o">.</span><span class="n">fig</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script type="text/javascript">if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}</script>                <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>                <div id="44a22038-0305-4a49-9b35-4067c02eda0d" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("44a22038-0305-4a49-9b35-4067c02eda0d")) {                    Plotly.newPlot(                        "44a22038-0305-4a49-9b35-4067c02eda0d",                        [{"legendgroup":"Ground Truth","legendrank":100,"line":{"dash":"dash"},"mode":"lines","name":"Ground Truth","showlegend":true,"text":["GroundTruthState<br>[[0]\n [1]\n [0]\n [1]]<br>2022-09-26 17:25:30.001316","GroundTruthState<br>[[1.17722347]\n [1.17454005]\n [1.00067575]\n [0.98556448]]<br>2022-09-26 17:25:31.001316","GroundTruthState<br>[[2.27546287]\n [1.00520515]\n [2.03072755]\n [1.03937242]]<br>2022-09-26 17:25:32.001316","GroundTruthState<br>[[3.15603997]\n [0.84910364]\n [3.2076891 ]\n [1.238314  ]]<br>2022-09-26 17:25:33.001316","GroundTruthState<br>[[4.11148457]\n [1.04478491]\n [4.68154658]\n [1.59084802]]<br>2022-09-26 17:25:34.001316","GroundTruthState<br>[[5.0689187 ]\n [0.98798667]\n [6.42409632]\n [1.77577014]]<br>2022-09-26 17:25:35.001316","GroundTruthState<br>[[6.13410397]\n [1.16811616]\n [8.29155731]\n [1.82192523]]<br>2022-09-26 17:25:36.001316","GroundTruthState<br>[[ 7.33666159]\n [ 1.28324857]\n [10.21013307]\n [ 2.01430647]]<br>2022-09-26 17:25:37.001316","GroundTruthState<br>[[ 8.70873977]\n [ 1.18677769]\n [12.63917113]\n [ 2.47937534]]<br>2022-09-26 17:25:38.001316","GroundTruthState<br>[[ 9.66166897]\n [ 0.89282915]\n [15.07724044]\n [ 2.43028493]]<br>2022-09-26 17:25:39.001316","GroundTruthState<br>[[10.28942728]\n [ 0.69092971]\n [17.46388039]\n [ 2.28585283]]<br>2022-09-26 17:25:40.001316","GroundTruthState<br>[[10.90851618]\n [ 0.63559754]\n [19.92298759]\n [ 2.27795093]]<br>2022-09-26 17:25:41.001316","GroundTruthState<br>[[11.43649485]\n [ 0.70608914]\n [22.43523846]\n [ 2.6968977 ]]<br>2022-09-26 17:25:42.001316","GroundTruthState<br>[[12.08375738]\n [ 0.66391157]\n [25.22625371]\n [ 2.76051945]]<br>2022-09-26 17:25:43.001316","GroundTruthState<br>[[12.85725554]\n [ 0.88012337]\n [28.31708702]\n [ 3.36182071]]<br>2022-09-26 17:25:44.001316","GroundTruthState<br>[[13.66400938]\n [ 0.90965246]\n [31.65360028]\n [ 3.31134733]]<br>2022-09-26 17:25:45.001316","GroundTruthState<br>[[14.660942  ]\n [ 1.13570134]\n [34.95982666]\n [ 3.21269825]]<br>2022-09-26 17:25:46.001316","GroundTruthState<br>[[15.76369159]\n [ 1.16458455]\n [38.32678424]\n [ 3.36652349]]<br>2022-09-26 17:25:47.001316","GroundTruthState<br>[[16.99429758]\n [ 1.13128308]\n [41.65059656]\n [ 3.38707982]]<br>2022-09-26 17:25:48.001316","GroundTruthState<br>[[18.30211424]\n [ 1.43090003]\n [44.94718307]\n [ 3.18966342]]<br>2022-09-26 17:25:49.001316","GroundTruthState<br>[[19.71972436]\n [ 1.53880955]\n [48.06695869]\n [ 3.14773137]]<br>2022-09-26 17:25:50.001316"],"x":[0,1.177223465328352,2.275462874700381,3.1560399703547968,4.111484568780832,5.068918699968233,6.134103970132443,7.336661592351442,8.708739774094603,9.661668970928952,10.289427281808946,10.90851617793013,11.43649485409589,12.083757383111484,12.857255540294034,13.664009379110706,14.66094199646186,15.763691585187017,16.994297584708757,18.302114239501268,19.71972436026734],"y":[0,1.0006757513847795,2.0307275520116606,3.2076890985336823,4.681546580969336,6.424096316700446,8.291557310607626,10.210133065599429,12.639171131337447,15.077240437037124,17.463880393414996,19.922987588268054,22.43523846129129,25.226253707256983,28.317087024384634,31.653600280950233,34.95982666405545,38.32678424492485,41.65059655664205,44.94718306572588,48.066958689446075],"type":"scatter"},{"legendgroup":"Measurements<br>(Detections)","legendrank":200,"marker":{"color":"#636EFA"},"mode":"markers","name":"Measurements<br>(Detections)","showlegend":true,"text":["Detection<br>[[Bearing(2.515900984981293)]\n [45.03578875479237]]<br>2022-09-26 17:25:42.001316","Detection<br>[[Bearing(2.645421155733226)]\n [41.82268473115909]]<br>2022-09-26 17:25:39.001316","Detection<br>[[Bearing(2.6675764047046098)]\n [45.84408657411932]]<br>2022-09-26 17:25:43.001316","Detection<br>[[Bearing(-3.1217136817127424)]\n [47.7876225398533]]<br>2022-09-26 17:25:30.001316","Detection<br>[[Bearing(2.5236104370654777)]\n [46.9982845683127]]<br>2022-09-26 17:25:45.001316","Detection<br>[[Bearing(2.9452471282335875)]\n [46.2161839747064]]<br>2022-09-26 17:25:36.001316","Detection<br>[[Bearing(3.037053677683474)]\n [45.71541374605071]]<br>2022-09-26 17:25:33.001316","Detection<br>[[Bearing(2.9878623947562133)]\n [43.60243560034166]]<br>2022-09-26 17:25:37.001316","Detection<br>[[Bearing(2.903665081663336)]\n [47.21145298695907]]<br>2022-09-26 17:25:32.001316","Detection<br>[[Bearing(3.044767462908764)]\n [45.74123179494575]]<br>2022-09-26 17:25:34.001316","Detection<br>[[Bearing(2.6573352109597863)]\n [43.4437023789485]]<br>2022-09-26 17:25:41.001316","Detection<br>[[Bearing(2.937703488743674)]\n [45.10212036890871]]<br>2022-09-26 17:25:35.001316","Detection<br>[[Bearing(2.435714315241148)]\n [46.21798149747487]]<br>2022-09-26 17:25:44.001316","Detection<br>[[Bearing(-3.096461688413128)]\n [48.50034235672541]]<br>2022-09-26 17:25:31.001316","Detection<br>[[Bearing(2.751748017042739)]\n [43.40696995272662]]<br>2022-09-26 17:25:40.001316","Detection<br>[[Bearing(2.0193429860239256)]\n [56.73700365375307]]<br>2022-09-26 17:25:50.001316","Detection<br>[[Bearing(2.2168669078367147)]\n [53.473621879810885]]<br>2022-09-26 17:25:48.001316","Detection<br>[[Bearing(2.32606487631801)]\n [49.55028147242189]]<br>2022-09-26 17:25:46.001316","Detection<br>[[Bearing(2.825754941593946)]\n [42.16978735715047]]<br>2022-09-26 17:25:38.001316","Detection<br>[[Bearing(2.2312923796610526)]\n [50.16616524252715]]<br>2022-09-26 17:25:47.001316","Detection<br>[[Bearing(2.113687859118837)]\n [53.696127508762395]]<br>2022-09-26 17:25:49.001316"],"x":[13.495870684052178,13.220645587904379,9.210581625879023,2.221819350783221,11.694085658745927,4.671810836553469,4.534156951991264,6.911778516695591,4.1185639808006655,4.473015456288891,11.551415784923044,5.832101951594851,14.826171916953918,1.549042106302693,9.849936778112081,25.395634186662065,17.806013715912904,16.034063908529554,9.91607756750875,19.22262346395934,22.259832475318465],"y":[26.375572252575715,19.91019957588045,20.926146862627856,-0.9499062386905731,27.230418264224387,9.016148199021414,4.770342745174409,6.676642845595845,11.127224359918513,4.421986485240061,20.2252725135359,9.132252939840118,29.98172162643846,-2.188124288687379,16.496589458288486,51.12448304412903,42.696316985016416,36.07693971814103,13.098478086148486,39.61561849446898,45.97561544057756],"type":"scatter"},{"legendgroup":"Tracks","legendrank":300,"marker":{"symbol":["square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square","square"]},"mode":"markers+lines","name":"Tracks","showlegend":true,"text":["GaussianStateUpdate<br>[[ 1.32742645]\n [ 1.        ]\n [-0.14578807]\n [ 1.        ]]<br>2022-09-26 17:25:30.001316","GaussianStateUpdate<br>[[1.88670436]\n [0.79279483]\n [0.31099362]\n [0.84126618]]<br>2022-09-26 17:25:31.001316","GaussianStateUpdate<br>[[2.81413851]\n [0.85331719]\n [3.8558697 ]\n [1.76274476]]<br>2022-09-26 17:25:32.001316","GaussianStateUpdate<br>[[4.19990505]\n [1.06770258]\n [5.23023903]\n [1.64330222]]<br>2022-09-26 17:25:33.001316","GaussianStateUpdate<br>[[4.87129209]\n [0.93266934]\n [5.96319472]\n [1.40539902]]<br>2022-09-26 17:25:34.001316","GaussianStateUpdate<br>[[5.75670126]\n [0.91003727]\n [8.08303554]\n [1.57598527]]<br>2022-09-26 17:25:35.001316","GaussianStateUpdate<br>[[5.71088896]\n [0.60375198]\n [9.58803259]\n [1.579317  ]]<br>2022-09-26 17:25:36.001316","GaussianStateUpdate<br>[[6.65170663]\n [0.7462235 ]\n [9.36065852]\n [1.18841702]]<br>2022-09-26 17:25:37.001316","GaussianStateUpdate<br>[[ 8.48802617]\n [ 1.07281737]\n [11.46938834]\n [ 1.34682721]]<br>2022-09-26 17:25:38.001316","GaussianStateUpdate<br>[[10.65241903]\n [ 1.34884634]\n [15.53842261]\n [ 1.87686406]]<br>2022-09-26 17:25:39.001316","GaussianStateUpdate<br>[[11.13509398]\n [ 1.07380886]\n [17.37179263]\n [ 1.89897152]]<br>2022-09-26 17:25:40.001316","GaussianStateUpdate<br>[[11.87186329]\n [ 0.95165212]\n [19.73480614]\n [ 2.0155248 ]]<br>2022-09-26 17:25:41.001316","GaussianStateUpdate<br>[[12.71321896]\n [ 0.84575799]\n [23.56503956]\n [ 2.43583473]]<br>2022-09-26 17:25:42.001316","GaussianStateUpdate<br>[[12.06470323]\n [ 0.45167249]\n [24.67426798]\n [ 2.20520755]]<br>2022-09-26 17:25:43.001316","GaussianStateUpdate<br>[[13.1659365 ]\n [ 0.59427928]\n [27.89679341]\n [ 2.41395188]]<br>2022-09-26 17:25:44.001316","GaussianStateUpdate<br>[[13.13563976]\n [ 0.46529743]\n [29.31723356]\n [ 2.20740895]]<br>2022-09-26 17:25:45.001316","GaussianStateUpdate<br>[[14.09563348]\n [ 0.51389271]\n [33.1854397 ]\n [ 2.59336659]]<br>2022-09-26 17:25:46.001316","GaussianStateUpdate<br>[[15.87368579]\n [ 0.79211516]\n [37.00700113]\n [ 2.8203146 ]]<br>2022-09-26 17:25:47.001316","GaussianStateUpdate<br>[[16.88095635]\n [ 0.77750502]\n [41.04870372]\n [ 3.12228138]]<br>2022-09-26 17:25:48.001316","GaussianStateUpdate<br>[[18.91528454]\n [ 1.08193401]\n [44.51442516]\n [ 3.12331707]]<br>2022-09-26 17:25:49.001316","GaussianStateUpdate<br>[[21.37034248]\n [ 1.35031399]\n [48.84583585]\n [ 3.35504785]]<br>2022-09-26 17:25:50.001316"],"x":[1.3274264541216636,1.8867043623537465,2.814138509402241,4.199905052014181,4.871292085079629,5.756701260914121,5.7108889629353445,6.651706631345143,8.488026166153864,10.652419034359262,11.13509397703091,11.871863294147559,12.71321895609298,12.06470323385273,13.16593650043692,13.135639755308889,14.095633482746788,15.873685792601213,16.88095635387739,18.915284544085058,21.37034247620316],"y":[-0.14578806580866033,0.3109936224786446,3.8558697028362023,5.230239029551543,5.96319471887147,8.083035535436148,9.588032594662012,9.360658523380751,11.469388341463814,15.538422610846428,17.37179263419162,19.734806142609717,23.565039563481818,24.67426797701844,27.896793405068017,29.317233556029258,33.185439695687286,37.007001133157154,41.04870372026218,44.514425162781976,48.84583585228551],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":true,"x":[0.5528298233344284,0.567377430550072,0.6110749292209626,0.6839842927555222,0.7858240772101459,0.9152514806025712,1.0687001542989325,1.2391137804829462,1.4157393587014728,1.586154222961933,1.7396023039061719,1.8690274204539596,1.9708666155890582,2.0437771588972318,2.087475403327018,2.1020230849088986,2.0874754033270175,2.0437771588972313,1.9708666155890573,1.869027420453959,1.7396023039061714,1.5861542229619312,1.415739358701472,1.239113780482945,1.0687001542989316,0.9152514806025699,0.7858240772101464,0.6839842927555219,0.611074929220962,0.5673774305500717],"y":[-0.14578806580866027,0.07244820400400731,0.2846276102139258,0.4840990033345327,0.6630479372534512,0.8121065536942288,0.9206003009383812,0.9781997124180126,0.9781996737085259,0.9205995405985772,0.8121057493269795,0.6630499522329981,0.4841033615312753,0.28463052207527795,0.0724487565190309,-0.14578806580866727,-0.3640248881363538,-0.5762066536925999,-0.7756794931485979,-0.9546260838503197,-1.1036818809443005,-1.2121756722158987,-1.2697758053258466,-1.269775844035333,-1.2121764325557016,-1.1036826853115485,-0.9546240688707724,-0.7756751349518525,-0.5762037418312445,-0.36402433562132586],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[2.6129914488965698,2.5975100959575235,2.556649317119865,2.4897181500755154,2.3957681892350773,2.274235666013371,2.1265124007835046,1.9587185264735212,1.7836677629989164,1.6176200621135164,1.473104301686576,1.3558331253553253,1.266836925820784,1.2053022289883235,1.170106833660153,1.160417275810923,1.1758990019434852,1.2167635257946752,1.283701529052336,1.3776504712416568,1.4991706463504437,1.646888278547579,1.8146887434399686,1.9897395144932832,2.1557807456611555,2.3003020783394925,2.4175851062256744,2.5065820419471434,2.568110187746136,2.6033021878298737],"y":[0.301616799739773,0.0774644148364679,-0.14158386618014163,-0.3500016478003204,-0.5406403432334054,-0.7036722411334589,-0.825789455020936,-0.8915104253683263,-0.8892501164417624,-0.8192143599394884,-0.6933265108851402,-0.5272307409368262,-0.3342410366304648,-0.12415363374784977,0.09589012831679944,0.320370445217516,0.5445257850225629,0.7635875657290241,0.9720163053118963,1.1626440728625718,1.3256568963899502,1.4477718286848131,1.513497395552439,1.5112376736389916,1.441206682273632,1.315316406959409,1.1492012502055053,0.9562005953607445,0.746124323278515,0.526094153089244],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[3.584348409677193,3.5662226950850857,3.5229723528315233,3.4534403984545716,3.3556653905083764,3.2273541376826067,3.0674471637417846,2.880722519983787,2.683984390958405,2.5012426015815925,2.348293659306835,2.228896117765666,2.141271084230955,2.0825839369348276,2.050601640143948,2.0439286091272892,2.062055484742435,2.1053022956606653,2.1748431403692092,2.2725963436359944,2.4009228315346904,2.5608458172377526,2.747548857971223,2.944287047116957,3.1270498629368175,3.2799833126972686,3.3993669224335,3.487011628254423,3.5456911803744817,3.577676106929652],"y":[3.8388085810957606,3.580555943054028,3.327105392893185,3.083564159111113,2.856955841964176,2.6581837735168428,2.5042417553694323,2.418907377768407,2.4232667334303315,2.516772237977775,2.6776561359293254,2.881944698822985,3.1126117048099355,3.3590224022751705,3.6141190900774802,3.8729308245766436,4.1311932098321185,4.384623477916126,4.628193763460737,4.854754407448222,5.053555570319116,5.2075089600410385,5.292830795148971,5.288474153569233,5.1949551622321675,5.034083333714632,4.829824511327704,4.5991089134141445,4.352727632886256,4.097610526540411],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[4.966655153099545,4.930533970535321,4.871130300193862,4.78727686235488,4.676826861133489,4.536662109504368,4.364161201415213,4.1630926732379745,3.9552010897501835,3.773449877408452,3.633524493319419,3.533610757551368,3.467760259740296,3.4310353427430016,3.420139708551655,3.433154950928816,3.4692799145031046,3.528681640259493,3.61252353055888,3.7229831414196766,3.863147666595424,4.035648985523081,4.236702393611481,4.4445947206838925,4.62636029762623,4.76628536079845,4.8661992798403535,4.932044761980924,4.9687753632234815,4.9796702939873825],"y":[5.162567925823602,4.885217039123452,4.613504122395641,4.351861742036337,4.106944773406707,3.8895072708085636,3.7187432227134587,3.626280703617523,3.6446328473827254,3.7708775949337188,3.969215980018059,4.207841855691468,4.468344815472193,4.7405956101115185,5.018497817674195,5.2979101332794825,5.57528285301378,5.846980822807087,6.108590746436194,6.353533095745098,6.57097037180026,6.741734897034701,6.834194437201969,6.815850718651535,6.689600389940097,6.491262546577663,6.252636408199951,5.992160119885246,5.719875347689185,5.441958083651088],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[5.613419829280387,5.5659356051254365,5.496779226988236,5.404860131759639,5.288037595163038,5.143034765152756,4.966577733285521,4.761718022092282,4.553199329504637,4.3793243889633136,4.25373356273199,4.17034510708541,4.120988269503825,4.0998425534835965,4.103259365729948,4.129164340878871,4.176655058204412,4.245807752837885,4.337720111667767,4.4545464001433945,4.599548630349796,4.77600655109657,4.9808425436418196,5.189363108291349,5.36325986996946,5.488850109835637,5.572238975590459,5.62159459750171,5.64274191081081,5.639323142953851],"y":[5.8665593990227345,5.586168286246758,5.311771532868409,5.047380836311456,4.799138234131277,4.577420539779637,4.401765723099736,4.307532716974724,4.334692051582653,4.47823414979985,4.6932209659661925,4.944677630974583,5.214568995043969,5.493662229421646,5.7765971651516645,6.059830038720205,6.340252149430584,6.614627362027141,6.87899886782103,7.127250885207185,7.348967916910754,7.524623799147955,7.618852484094976,7.591707526311847,7.4481551770053995,7.233169618493674,6.981712159332641,6.711830857313026,6.432717347010634,6.149760645503187],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[6.4754266994188825,6.422592940562545,6.349114583695193,6.25397139006736,6.135099479377231,5.9892898774036745,5.813183665685016,5.609650887585506,5.404627682875348,5.238053446712408,5.121963893095075,5.048260709751928,5.007973532145789,4.995039016514688,5.005738908400197,5.03797582240936,5.090817585382735,5.164291241878033,5.2594302892704885,5.378302833321791,5.524111581188828,5.700218967579286,5.9037613291232915,6.108783600767382,6.275349156950764,6.391438011550836,6.465141723574657,6.505428785506508,6.518363530853807,6.507660858324933],"y":[7.973120634042863,7.696569363613969,7.4261427427626305,7.165629447007508,6.920869295403281,6.701906864799035,6.528025068089314,6.435461724236411,6.466812863741234,6.615979809545657,6.834548785628206,7.087080284856923,7.356182416714023,7.633210965248504,7.913213285031877,8.192950436829431,8.469536482765427,8.73993879150491,9.000439616952718,9.245201403840035,9.464162876211489,9.63804608478427,9.730610985967013,9.699253745211905,9.550091149768367,9.331523872092724,9.078991203161127,8.809890821137348,8.532849133079937,8.252822207600012],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[6.410619085938408,6.34873102344199,6.2668443577323805,6.1641012273219005,6.0386996693970385,5.887875511720199,5.7090694033277405,5.5064533929816095,5.306953579058612,5.1493526897246635,5.043672941180673,4.98072961686511,4.951119798720354,4.948594424221236,4.969331797961122,5.011158839932281,5.073055978312087,5.154937173904468,5.257675679922398,5.383078039186946,5.533901335561819,5.712708634984259,5.9153342516737455,6.114832909177902,6.272425312418503,6.378104444013614,6.441048237968976,6.470657990406327,6.473183126253868,6.452442142899029],"y":[9.453942293030957,9.185264376997063,8.923349599751747,8.671949670245356,8.436864608539139,8.228051693159625,8.064508774402865,7.981547935968253,8.019775247495302,8.171768004824218,8.389828915178091,8.639605344737019,8.904397451871175,9.17595698365776,9.449565328108779,9.722122896293067,9.990834402699065,10.252725667599627,10.504113328795867,10.739200226818687,10.94801224780821,11.111556491210212,11.19451851903318,11.156285172907843,11.004297072047263,10.786237832804257,10.536460253805009,10.271670149140965,10.0000975085983,9.726465295271773],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[7.33835553892615,7.26826829366187,7.178617343892876,7.068690524956493,6.936922973385096,6.780958769318129,6.5989995592125466,6.396473391096516,6.201160583754493,6.050678615816247,5.953416593008737,5.899364251494889,5.878761037190382,5.885182083957179,5.914698534817883,5.9650577237641365,6.0351548638747845,6.124799751808739,6.2347210953642564,6.3664900681802,6.5224534372087035,6.704413818223528,6.90695023480123,7.102261603259762,7.252734719298081,7.349996208426158,7.404048955704708,7.424652140137043,7.418230468078308,7.38870974423587],"y":[9.204487360158305,8.941954633638964,8.68680732686455,8.442799052077262,8.21574446649253,8.015586863326806,7.861141527901099,7.786851852621341,7.831270395489265,7.985851334344847,8.203804112843791,8.451726805766649,8.71343975668854,8.980975239055434,9.249775617926545,9.516829686603197,9.779394563264924,10.034519353553861,10.278514768260404,10.505572247597575,10.705729048157883,10.860175590614997,10.934466163986722,10.89004129467695,10.735465598092235,10.517514414315691,10.269590636579606,10.007880909451591,9.740331463901594,9.471508161688899],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[9.168832555231894,9.096547541758996,9.004733766825044,8.892768214520682,8.75925301911623,8.602137747955316,8.420244969505722,8.219849255466128,8.028144353282693,7.88065238587076,7.78549331055067,7.733314239967498,7.7146245024557984,7.723060400702615,7.7546863236031776,7.807219777075833,7.879514111791313,7.971322186952405,8.083279998609132,8.2167991136221,8.373913726369851,8.55580747818809,8.756180082288623,8.947888264650516,9.095400018197578,9.190558658238462,9.242738045363192,9.261427685133762,9.252991200610062,9.22136119531965],"y":[11.305479699956512,11.048646673227987,10.799525161987093,10.561938534887751,10.34179257311802,10.149057720502496,10.002280444994181,9.934332280998463,9.98049371136291,10.132190832900376,10.34567135709237,10.588794455755984,10.845593159187892,11.10808693969773,11.371677581420748,11.633296982971114,11.890158821649777,12.139260212128594,12.376830407217565,12.596983822586752,12.789718082571461,12.936496306005818,13.004442730928426,12.958294925022257,12.80658573689808,12.593106499773421,12.349982573752177,12.093192291123234,11.830680356140943,11.567069204260191],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[11.32545849377659,11.24489806093873,11.144863065201587,11.024953562870703,10.88416038231023,10.721118858729966,10.535978833365814,10.336843373592108,10.150551295159179,10.009293374502574,9.920302768148543,9.874687389446345,9.863100798507839,9.879113844434963,9.91867510548173,9.979379574941934,10.059948797505603,10.159978405544612,10.279875999551093,10.4206775182738,10.583718605469686,10.76885934209763,10.967976216696426,11.154271211855958,11.295544756813321,11.384535073471767,11.430150649032951,11.441737469972104,11.4257233475407,11.386158054500177],"y":[15.348898118443042,15.100873203660752,14.861512881241227,14.63479506928109,14.426830946316851,14.247707797132271,14.115581209354582,14.060770304034508,14.113234796474734,14.263893074147344,14.473214262991972,14.711093676754606,14.961983589216873,15.217933231360155,15.474304598356786,15.727947103249813,15.975995794591535,16.21533958228383,16.44203586347211,16.650014058459657,16.829136871501955,16.961264066883707,17.01607453148227,16.963620396922817,16.812952045314155,16.603631745938667,16.36575181771563,16.11487826049379,15.858904037393128,15.6025157539098],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[11.790755416396133,11.691465109047634,11.573160858035836,11.435889182526308,11.279370865729637,11.1034609426036,10.910484351808721,10.711419489813235,10.533396186275196,10.404808419855767,10.33062519905737,10.301377839866154,10.30730579010003,10.341594419725304,10.399865965361782,10.479432537665689,10.57873161037281,10.697030428468846,10.834284363829134,10.99081694991933,11.166726607990281,11.359703691445374,11.558754287246757,11.736780357936588,11.865379579151702,11.939562646378745,11.968810105641621,11.962884225624121,11.928592312174496,11.870316411853484],"y":[17.125922207496497,16.89115047602099,16.66696296816395,16.457517585267926,16.269158802756543,16.112073373050936,16.003772228450114,15.971253404882013,16.03801564262679,16.19339862032416,16.40188414523807,16.63590248726647,16.88075690694778,17.12878854740689,17.375473195097932,17.617663060886745,17.85245331766607,18.07662797741689,18.28604803858232,18.474426320035782,18.631511598221692,18.739813073778663,18.77233297141003,18.70557811281513,18.550186563912362,18.341701612288865,18.107682981819686,17.86285263568578,17.61479025243185,17.368092352302178],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[12.509303992116875,12.395132745719136,12.262641252693173,12.112181759025,11.943950709438258,11.758566679946512,11.55964656921827,11.359961364823603,11.18761201529605,11.069602865847562,11.008786544914287,10.994317419716797,11.01568044037803,11.06563001499853,11.139509943869273,11.234422596178241,11.348603353838447,11.481088882089583,11.631528114877034,11.799775741307302,11.985159530522473,12.18408010490418,12.383751989423716,12.556104367387634,12.674123759734098,12.73493997369945,12.749409172401583,12.728049987753614,12.678095006152759,12.604210112512279],"y":[19.44583565934973,19.2196002432786,19.005261195928675,18.80699461973938,18.631176491026654,18.487965421028612,18.39451658915384,18.376455567315556,18.4545905871475,18.616667645858975,18.827863061417265,19.06167318090775,19.30409801730547,19.54789454654697,19.788789395438,20.023776625869704,20.250029061468588,20.464356280729685,20.66259791337352,20.838435668576473,20.9816466257563,21.07509572169816,21.093158690627288,21.01503035123055,20.85294455791678,20.641749665104914,20.407939290550022,20.165539856432954,19.921711649939184,19.680804519627824],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.33137152188586,13.203203496976665,13.05751540445479,12.894905789766407,12.715945254845158,12.521848792647585,12.317242665825825,12.116464032478472,11.949060521303544,11.841440139716829,11.794168609153525,11.794606532398552,11.831317481306193,11.89660046451961,11.985541379917397,12.0950663903001,12.223245157568062,12.368926433133074,12.531514638928282,12.710492508212813,12.904588710558428,13.109195335699905,13.309960485558237,13.477367528036144,13.584997805239459,13.632269259824833,13.63183139586642,13.5951257517326,13.52983546847831,13.44088872366049],"y":[23.23720533920539,23.018065616736763,22.81190230991567,22.62284875304746,22.45724460733447,22.325194050987513,22.243652745636098,22.23761571740132,22.326401625750705,22.495992246346916,22.711116159542485,22.945872343339783,23.186945216221496,23.42758080238769,23.663824423951468,23.89287378775825,24.112030221798616,24.31818186770792,24.507212099583903,24.67283439915588,24.804884851040192,24.886426402279955,24.89246624743016,24.803686997580208,24.63408679490381,24.418963432172564,24.18420697465902,23.943158635470905,23.702492241750882,23.466236435539933],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[12.656392767750688,12.510617054061054,12.348439777648169,12.170724217086176,11.978439314425957,11.77344440467526,11.561483721097723,11.358864704487683,11.19755763998188,11.103730664922963,11.07460590752247,11.094817930841524,11.151623926629046,11.236741196937597,11.344957966732451,11.473013699954773,11.618802353529556,11.780971297097915,11.958665312620123,12.150966976496132,12.355961556544598,12.567922846211642,12.770527292048715,12.9318388671395,13.02567583064513,13.054800555545594,13.034588572570115,12.977789129933443,12.892662633625154,12.784438548342088],"y":[24.299781337147337,24.08907285384905,23.89252932211264,23.71418417652028,23.560282428918388,23.440844336554427,23.37269654014532,23.380573706462606,23.482671665099048,23.662413270135183,23.883147257541562,24.119536096613327,24.359209690963635,24.5961272388878,24.826805638699593,25.048754616889546,25.259480239962592,25.456011731450555,25.63433646632144,25.788253401896203,25.907691382769553,25.97583943022976,25.96796641576732,25.865875583862895,25.686122586888565,25.46538925470345,25.229000069935115,24.989348124351256,24.752402368853296,24.521711284897357],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.742848853944423,13.586989756565604,13.41544436026085,13.229122422333033,13.029049337088159,12.817200020301714,12.59958959801796,12.393629525343641,12.234163686152058,12.148588419503639,12.131209795120183,12.164085222383338,12.233415843117813,12.330564632413381,12.450199900474312,12.589024146929418,12.744898993729285,12.91643412267615,13.102737469276994,13.302823439205481,13.514672254020846,13.732283520061468,13.938226159651698,14.097697964144832,14.183284607689012,14.200663241208298,14.167787836037732,14.09846287515332,14.00130502880489,13.88166063964684],"y":[27.50076519686015,27.291986102168,27.09770540702605,26.921830306352753,26.770484882743105,26.65366341429645,26.588475512643164,26.600866600923773,26.710340177036926,26.898070430055856,27.124570215240123,27.364249881612047,27.605364866003228,27.842424285644793,28.072318516524103,28.292821613275883,28.501620126719043,28.69588709326967,28.871745328071786,29.023101779229847,29.139923078020868,29.20511131443033,29.19272570346005,29.083260817273736,28.895516264618724,28.669017387125983,28.4293371913488,28.18823819407722,27.9511553636509,27.721246617316204],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[13.69029934035944,13.521072684382835,13.337086393482755,13.139380935673708,12.929175709149474,12.708790092516994,12.484893096349209,12.276496076746824,12.121458450647117,12.0476598684326,12.04574283134141,12.094994955907415,12.180532922452686,12.29334392694186,12.427948484790067,12.580980170258337,12.75022565989459,12.934199533126883,13.131888875469677,13.342103529443985,13.562488450904477,13.786386543053705,13.994763715793889,14.1498089931441,14.223619662164205,14.225536794867669,14.17628464202905,14.090751353318312,13.977931404372,13.843315658783714],"y":[28.890168088990794,28.687149074859928,28.499260440203894,28.330289188955533,28.18623729052162,28.07702156656075,28.019805110219785,28.041051047637104,28.16043166894147,28.356456914846337,28.58754228433369,28.828523133481834,29.068578374378752,29.30288900305538,29.52877516007962,29.744299023067722,29.94733891203627,30.135212691198234,30.30417042960866,30.44822965929297,30.55744517020275,30.614662015224557,30.593423332361873,30.474052648267968,30.278010069283958,30.04692585872129,29.805944283036474,29.565900030402002,29.331570367500195,29.10566840798725],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[14.634826585322017,14.456228202756293,14.263529602572094,14.057817271326316,13.840372299325821,13.613650604698803,13.384620948243931,13.1734312430962,13.02088811027373,12.955787343491805,12.965465494966844,13.026814669319753,13.124130746968705,13.248172736404886,13.393400382735413,13.556440380171559,13.735060755713997,13.927744723497375,14.13344449638594,14.350894342706859,14.577615077891885,14.806646151863086,15.017813036711683,15.170365739305332,15.235479636073288,15.22580168738917,15.164452414259943,15.06713896273456,14.943089232196407,14.797848290644822],"y":[32.73943039934056,32.539375715120926,32.35473143011572,32.18917694471664,32.04860196243188,31.942869750889713,31.88930118391065,31.915279910741493,32.041470153379656,32.244023281101924,32.47903649073781,32.72156032695985,32.96151106272578,33.194600886723485,33.418483723530976,33.63144899203401,33.831526496500715,34.01615445330825,34.181698660782146,34.32227724698429,34.428009174833974,34.481578218832624,34.45560850321992,34.329429829745564,34.12685597591485,33.8918442480941,33.64931941625485,33.40937414406789,33.17627005741187,32.95236978631949],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[16.387063635701924,16.19458572849529,15.989001494609898,15.771514420425957,15.543581885793687,15.307999910555445,15.072402155923115,14.858746134703006,14.71164684019493,14.660271877167537,14.68724009971196,14.766374365054299,14.88098391407254,15.02155404375174,15.182461256676916,15.360307949500502,15.552812066102415,15.758378683696918,15.975857405084634,16.203789313885018,16.4393699572547,16.67496955872085,16.88863279314181,17.03572861145959,17.087099712115716,17.060131894929118,16.98099738421048,16.86638753236575,16.72581139434662,16.564887989509376],"y":[36.531147025280596,36.33818695044094,36.16118079446291,36.00367624027044,35.87141922291848,35.77415862498041,35.72921385827688,35.76450076492849,35.90084481396774,36.1112206476599,36.349548087106214,36.59181976093361,36.82911584613668,37.05790094070229,37.27628468598672,37.482855241033704,37.675839710491815,37.852828289520396,38.010326183465004,38.142582849571006,38.23984310023867,38.28478841377899,38.249498181638884,38.113150382292446,37.902781489149895,37.664455932656224,37.422182904479854,37.18488616863451,36.95609224072538,36.73768959822316],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[16.40273565480943,16.611418121961467,16.83195722914935,17.062981682461544,17.302747647327294,17.547964210916284,17.79002503135969,18.004692666794767,18.143304303327046,18.177110000385113,18.129167083713302,18.028842111657728,17.893772905761182,17.733719267553806,17.554379147889918,17.359177052945352,17.150463670400466,16.92994554104164,16.698930075823323,16.459165507535662,16.213950708084656,15.971887567069192,15.75721636533217,15.618606711450237,15.584802713358439,15.632744922572865,15.733070375904438,15.86814040112736,16.02820093380774,16.207560572316712],"y":[41.560409578717156,41.74189789068994,41.90673148348433,42.05151159094732,42.1706518811179,42.25459883417889,42.28625626913888,42.237835537108,42.089520258649344,41.87206760795373,41.63269703935401,41.39371539183191,41.16254966463808,40.94184526287759,40.73296850632371,40.53699786180721,40.35548456937486,40.19066911932963,40.0458953133776,39.926755749821226,39.842809159655,39.811151172787554,39.859573849220176,40.00789098058794,40.225339941741346,40.464708232368196,40.70369161547345,40.93485868695253,41.155571630440825,41.36446809088634],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[18.473968723326976,18.69923082208297,18.935063642385632,19.179987070589917,19.432047736337257,19.68758705951996,19.937192719119164,20.154197068791984,20.284328851350768,20.29875820294088,20.22791807828642,20.104927304892907,19.94831875557346,19.76798652607854,19.56955827356432,19.35660036484314,19.131369264611358,18.895493610411194,18.65058072029031,18.398521881724214,18.142985143662496,17.89337633049219,17.67637406556478,17.546241022099693,17.53181089085281,17.602649775411766,17.725641487893697,17.8822512169876,18.06259191098568,18.260983126958443],"y":[45.05820619933128,45.228476879193806,45.38161083854928,45.51438760940278,45.621413294437815,45.69335398370496,45.71324888407552,45.65286575721821,45.49251853894555,45.26773475473741,45.02756384174909,44.792302928968915,44.567666017857455,44.35532060761929,44.15601582721496,43.97064412623267,43.80039522050829,43.647232422663926,43.51446208525208,43.407437221531815,43.33549694822902,43.315601443850966,43.37598333556182,43.536329530522075,43.761115609046016,44.001283560278374,44.23654691723324,44.46118544738189,44.67353984608818,44.872808644610785],"type":"scatter"},{"fill":"toself","fillcolor":"#00CC96","hoverinfo":"skip","legendgroup":"Tracks<br>(Ellipses)","legendrank":310,"mode":"none","name":"Tracks<br>(Ellipses)","opacity":0.2,"showlegend":false,"x":[20.9682661190669,21.20933375964115,21.459678113134363,21.717709951158973,21.981259755040817,22.24628487548671,22.502537933389956,22.720876194304072,22.84133804217705,22.83560003129864,22.74184525192281,22.596604255995366,22.419063577806206,22.219148196370796,22.002426939452878,21.77241883333942,21.53138010313788,21.28099305381467,21.022973299119336,20.75942579648557,20.4944042653352,20.238147108422595,20.019809883068717,19.899347248473028,19.905084900085495,19.99883772998501,20.144080326922918,20.321622612085847,20.521548078683203,20.738231706761557],"y":[49.41922864600009,49.57653537225901,49.71627937844596,49.83541238425756,49.92873762432265,49.987172562789866,49.99401958499934,49.92099053424539,49.74920154262995,49.51904648439896,49.280457587804314,49.05120650248315,48.83522958055433,48.63324147511848,48.44546282747528,48.27244305857093,48.11515383499714,47.97538527901258,47.856258620959096,47.76293425611689,47.70449971970513,47.697652109528626,47.77068040283279,47.942468842780045,48.17262513269404,48.41121037591694,48.640464698745895,48.85644348598782,49.05844078872697,49.24618766064209],"type":"scatter"}],                        {"colorway":["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52"],"xaxis":{"title":{"text":"<i>x</i>"}},"yaxis":{"scaleanchor":"x","scaleratio":1,"title":{"text":"<i>y</i>"}},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
<br />
<br /></section>
</section>
<section id="key-points">
<h2>Key points<a class="headerlink" href="#key-points" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Non-linear models can be incorporated into the tracking scheme through the use of the
appropriate combination of <a class="reference internal" href="../../smartfusion.predictor.html#smartfusion.predictor.base.Predictor" title="smartfusion.predictor.base.Predictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Predictor</span></code></a>/<a class="reference internal" href="../../smartfusion.models.transition.html#smartfusion.models.transition.base.TransitionModel" title="smartfusion.models.transition.base.TransitionModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransitionModel</span></code></a> or
<a class="reference internal" href="../../smartfusion.updater.html#smartfusion.updater.base.Updater" title="smartfusion.updater.base.Updater"><code class="xref py py-class docutils literal notranslate"><span class="pre">Updater</span></code></a>/<a class="reference internal" href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.base.MeasurementModel" title="smartfusion.models.measurement.base.MeasurementModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeasurementModel</span></code></a></p></li>
<li><p>Because SMART FUSION uses inheritance, the amount of engineering required to achieve this is
minimal and the interface is the same. A user can apply the EKF components in exactly the same
way as the KF.</p></li>
</ol>
<p>The first order approximations used by the EKF provide a simple way to handle non-linear tracking
problems. However, in highly non-linear systems these simplifications can lead to large errors in
both the posterior state mean and covariance. In instances where we have noisy transition, or
perhaps unreliable measurement, this could lead to a sub-optimal performance or even divergence
of the filter. In the next tutorial, we see how the <strong>unscented Kalman filter</strong> can begin to
addresses these issues.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading"></a></h2>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Anderson &amp; Moore 2012, Optimal filtering,
(<a class="reference external" href="http://users.cecs.anu.edu.au/~john/papers/BOOK/B02.PDF">http://users.cecs.anu.edu.au/~john/papers/BOOK/B02.PDF</a>)</p>
</dd>
</dl>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.319 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-tutorials-fundamentals-02-extendedkalmanfiltertutorial-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/claycurry34/Smart-Fusion/main?filepath=notebooks/auto_tutorials/fundamentals/02_ExtendedKalmanFilterTutorial.ipynb"><img alt="Launch binder" src="../../_images/binder_badge_logo1.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/8d5b14d75ac077483ea7a3101994e844/02_ExtendedKalmanFilterTutorial.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">02_ExtendedKalmanFilterTutorial.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/d42ae22b85afab6446388a9548c69637/02_ExtendedKalmanFilterTutorial.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">02_ExtendedKalmanFilterTutorial.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="01_KalmanFilterTutorial.html" class="btn btn-neutral float-left" title="1 - An introduction to SMART FUSION: using the Kalman filter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="03_UnscentedKalmanFilterTutorial.html" class="btn btn-neutral float-right" title="3 - Non-linear models: unscented Kalman filter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2022 University of Oklahoma.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>