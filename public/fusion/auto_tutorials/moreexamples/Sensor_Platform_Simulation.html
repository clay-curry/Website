<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sensor Platform Simulation Example &mdash; SMART FUSION 0.1b11.dev6+g9121db30.d20220926 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="Creating Smooth Transitions Between Coordinates" href="Smooth_Platform_Coordinate_Transitions.html" />
    <link rel="prev" title="Gromov Particle Flow Filter" href="ParticleFlow.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> SMART FUSION
            <img src="../../_static/smart_fusion_logo.jpeg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1b11.dev6+g9121db30.d20220926
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../design.html">Framework </a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#fundamentals">Fundamentals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#more-examples">More Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#sensor-management">Sensor Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#state-estimation">State Estimation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">More Examples</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="Classifying_Using_HMM.html">Classification Using Hidden Markov Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="Creating_Actionable_Sensor.html">Creating an Actionable Sensor Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="Disjoint_Tracking_Classification.html">Disjoint Tracking and Classification</a></li>
<li class="toctree-l4"><a class="reference internal" href="MTT_3D_Platform.html">Multi-Target Tracking in 3D Using Platform Simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="Metrics.html">Metrics Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="Moving_Platform_Simulation.html">Multi-Sensor Moving Platform Simulation Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="ParticleFlow.html">Gromov Particle Flow Filter</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Sensor Platform Simulation Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="Smooth_Platform_Coordinate_Transitions.html">Creating Smooth Transitions Between Coordinates</a></li>
<li class="toctree-l4"><a class="reference internal" href="Track2Track_Fusion_Example.html">Multi-Sensor Fusion: Covariance Intersection Using Tracks as Measurements</a></li>
<li class="toctree-l4"><a class="reference internal" href="range_range_rate_binning.html">RangeRangeRateBinning measurement model example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../sensormanagement/index.html">Sensor Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stateestimation/index.html">State Estimation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../smartfusion.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_demos/index.html">Demonstrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright &amp; License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SMART FUSION</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
          <li><a href="index.html">More Examples</a> &raquo;</li>
      <li>Sensor Platform Simulation Example</li>
  
    
    
      
    
  
  <li class="wy-breadcrumbs-aside">
    <a href="https://github.com/claycurry34/Smart-Fusion/blob/main/docs/source/../tutorials/moreexamples/Sensor_Platform_Simulation.py" class="fa fa-github"> Edit on GitHub</a>
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-tutorials-moreexamples-sensor-platform-simulation-py"><span class="std std-ref">here</span></a>
to download the full example code or to run this example in your browser via Binder</p>
</div>
<section class="sphx-glr-example-title" id="sensor-platform-simulation-example">
<span id="sphx-glr-auto-tutorials-moreexamples-sensor-platform-simulation-py"></span><h1>Sensor Platform Simulation Example<a class="headerlink" href="#sensor-platform-simulation-example" title="Permalink to this heading"></a></h1>
<p>This example looks at how platforms and sensors can be used within the SMART FUSION simulation capability.</p>
<section id="building-a-simulated-sensor-platform">
<h2>Building a Simulated Sensor Platform<a class="headerlink" href="#building-a-simulated-sensor-platform" title="Permalink to this heading"></a></h2>
<p>The focus of this example is to show how to setup and configure simulations, as such the application of a tracker
will not be covered in detail. For more information about trackers and how to configure them review of the
tutorials and demonstrations is recommended.</p>
<p>This example makes use of SMART FUSION <a class="reference internal" href="../../smartfusion.platform.html#smartfusion.platform.base.FixedPlatform" title="smartfusion.platform.base.FixedPlatform"><code class="xref py py-class docutils literal notranslate"><span class="pre">FixedPlatform</span></code></a> and <a class="reference internal" href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> objects.</p>
<p>In order to configure platforms, sensors and the simulation we will need to import some specific SMART FUSION objects.
As these have been introduced in previous tutorials they are imported upfront. New functionality within this example
will be imported at the relevant point in order to draw attention to the new features.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Some general imports and set up</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="datetime.timedelta" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class"><span class="n">timedelta</span></a>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># SMART FUSION imports:</span>
<span class="kn">from</span> <span class="nn">smartfusion.types.state</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.state.State" title="smartfusion.types.state.State" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">State</span></a><span class="p">,</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.array</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">StateVector</span></a><span class="p">,</span> <a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">CovarianceMatrix</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.models.transition.linear</span> <span class="kn">import</span> <span class="p">(</span>
    <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">CombinedLinearGaussianTransitionModel</span></a><span class="p">,</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">)</span>
<span class="kn">from</span> <span class="nn">smartfusion.models.measurement.nonlinear</span> <span class="kn">import</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class"><span class="n">CartesianToElevationBearingRange</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.updater.kalman</span> <span class="kn">import</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class"><span class="n">UnscentedKalmanUpdater</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.predictor.kalman</span> <span class="kn">import</span> <a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.UnscentedKalmanPredictor" title="smartfusion.predictor.kalman.UnscentedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class"><span class="n">UnscentedKalmanPredictor</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.deleter.time</span> <span class="kn">import</span> <a href="../../smartfusion.deleter.html#smartfusion.deleter.time.UpdateTimeStepsDeleter" title="smartfusion.deleter.time.UpdateTimeStepsDeleter" class="sphx-glr-backref-module-smartfusion-deleter-time sphx-glr-backref-type-py-class"><span class="n">UpdateTimeStepsDeleter</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.tracker.simple</span> <span class="kn">import</span> <a href="../../smartfusion.tracker.html#smartfusion.tracker.simple.MultiTargetTracker" title="smartfusion.tracker.simple.MultiTargetTracker" class="sphx-glr-backref-module-smartfusion-tracker-simple sphx-glr-backref-type-py-class"><span class="n">MultiTargetTracker</span></a>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># Define the simulation start time</span>
<a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="create-a-platform">
<h2>Create a Platform<a class="headerlink" href="#create-a-platform" title="Permalink to this heading"></a></h2>
<p>The first element we need to create is a platform. For this first example we will build a static (or <em>fixed</em>) platform
which is located at the origin. For this example we are going to work in a 6-dimensional state space our platform will
have the following <span class="math notranslate nohighlight">\(\mathbf{x}\)</span>.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{x} = \begin{bmatrix}
               x\\ \dot{x}\\ y\\ \dot{y}\\ z\\ \dot{z} \end{bmatrix}
           = \begin{bmatrix}
               0\\ 0\\ 0\\ 0\\ 0\\ 0 \end{bmatrix}\end{split}\]</div>
<p>Because the platform is static we only need to define <span class="math notranslate nohighlight">\((x, y, z)\)</span>, any internal interaction with the platform
which requires knowledge of platform velocity <span class="math notranslate nohighlight">\((\dot{x}, \dot{y}, \dot{z})\)</span> will be returned <span class="math notranslate nohighlight">\((0, 0, 0)\)</span>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># First import the fixed platform</span>
<span class="kn">from</span> <span class="nn">smartfusion.platform.base</span> <span class="kn">import</span> <a href="../../smartfusion.base.html#smartfusion.base.Base" title="smartfusion.base.Base" class="sphx-glr-backref-module-smartfusion-base sphx-glr-backref-type-py-class"><span class="n">FixedPlatform</span></a>

<span class="c1"># Define the initial platform position, in this case the origin</span>
<a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">platform_state_vector</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">StateVector</span></a><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">position_mapping</span></a> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create the initial state (position, time), notice it is set to the simulation start time defined earlier</span>
<a href="../../smartfusion.types.html#smartfusion.types.state.State" title="smartfusion.types.state.State" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">platform_state</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.state.State" title="smartfusion.types.state.State" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">State</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">platform_state_vector</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">start_time</span></a><span class="p">)</span>

<span class="c1"># create our fixed platform</span>
<span class="n">platform</span> <span class="o">=</span> <a href="../../smartfusion.base.html#smartfusion.base.Base" title="smartfusion.base.Base" class="sphx-glr-backref-module-smartfusion-base sphx-glr-backref-type-py-class"><span class="n">FixedPlatform</span></a><span class="p">(</span><span class="n">states</span><span class="o">=</span><a href="../../smartfusion.types.html#smartfusion.types.state.State" title="smartfusion.types.state.State" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">platform_state</span></a><span class="p">,</span>
                         <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">position_mapping</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">position_mapping</span></a><span class="p">)</span>
</pre></div>
</div>
<p>We have now created a platform within SMART FUSION and located it at the origin of our state space. As previously stated
the platform will have a velocity <span class="math notranslate nohighlight">\((\dot{x}, \dot{y}, \dot{z})\)</span> of <span class="math notranslate nohighlight">\((0, 0, 0)\)</span> which we can check:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="o">.</span><span class="n">velocity</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>StateVector([[0],
             [0],
             [0]])
</pre></div>
</div>
<p>We can also query the platform orientation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="o">.</span><span class="n">orientation</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>StateVector([[0],
             [0],
             [0]])
</pre></div>
</div>
</section>
<section id="create-a-sensor">
<h2>Create a Sensor<a class="headerlink" href="#create-a-sensor" title="Permalink to this heading"></a></h2>
<p>Now that we have a platform the next step is to create a sensor which can be added to the platform. In this example a
Radar will be created which is capable of measuring the range, bearing and elevation of the target relative to the
sensor.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">RadarRangeBearingElevation</span></code>  provides a sensor wrapper around the
<a class="reference internal" href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange"><code class="xref py py-class docutils literal notranslate"><span class="pre">CartesianToElevationBearingRange</span></code></a> measurement model. The measurement model provides a time-invariant
measurement model, where measurements are assumed to be received in the form of elevation (<span class="math notranslate nohighlight">\(\theta\)</span>),
bearing (<span class="math notranslate nohighlight">\(\phi\)</span>) and range (<span class="math notranslate nohighlight">\(r\)</span>) with Gaussian noise in each dimension.</p>
<p>The model is described by the following equations:</p>
<div class="math notranslate nohighlight">
\[\mathbf{z}_k = h(\mathbf{x}_k, \dot{\mathbf{x}}_k)\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{z}_k\)</span> is a measurement vector of the form:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{z}_k = \begin{bmatrix} \theta \\ \phi \\ r \end{bmatrix}\end{split}\]</div>
<p>and <span class="math notranslate nohighlight">\(h\)</span> is a non-linear model function of the form:</p>
<div class="math notranslate nohighlight">
\[\begin{split}h(\mathbf{x}_k,\dot{\mathbf{x}}_k) = \begin{bmatrix}
          \arcsin{(\mathcal{z}/\sqrt{\mathcal{x}^2 + \mathcal{y}^2 +\mathcal{z}^2})} \\
          \arctan{(\mathcal{y},\mathcal{x})} \\
          \sqrt{\mathcal{x}^2 + \mathcal{y}^2 + \mathcal{z}^2}
          \end{bmatrix} + \dot{\mathbf{x}}_k\end{split}\]</div>
<p>and finally <span class="math notranslate nohighlight">\(\mathbf{z}_k\)</span> is Gaussian distributed with covariance <span class="math notranslate nohighlight">\(R\)</span>, i.e.:</p>
<div class="math notranslate nohighlight">
\[\mathbf{z}_k \sim \mathcal{N}(0,R)\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}R = \begin{bmatrix}
  \sigma_{\theta}^2 &amp; 0 &amp; 0 \\
  0 &amp; \sigma_{\phi}^2 &amp; 0 \\
  0 &amp; 0 &amp; \sigma_{r}^2
  \end{bmatrix}\end{split}\]</div>
<p>We now create our radar.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import a radar sensor model</span>
<span class="kn">from</span> <span class="nn">smartfusion.sensor.radar.radar</span> <span class="kn">import</span> <a href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor" class="sphx-glr-backref-module-smartfusion-sensor-sensor sphx-glr-backref-type-py-class"><span class="n">RadarElevationBearingRange</span></a>

<span class="c1"># First we need to configure a radar</span>

<span class="c1"># Generate a radar sensor with a suitable measurement accuracy</span>
<a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">noise_covar</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">CovarianceMatrix</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">([</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span></a><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
                                                 <a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span></a><span class="p">(</span><span class="mf">0.15</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
                                                 <span class="mi">25</span><span class="o">**</span><span class="mi">2</span><span class="p">])))</span>
<span class="c1"># this radar measures range with an accuracy of +/- 25m, and elevation accuracy +/- 3</span>
<span class="c1"># degrees and bearing accuracy of +/- 0.15 degrees</span>

<span class="c1"># The radar needs to be informed of where x, y, and z are in the target state space</span>
<a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">radar_mapping</span></a> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># Instantiate the radar</span>
<span class="n">radar</span> <span class="o">=</span> <a href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor" class="sphx-glr-backref-module-smartfusion-sensor-sensor sphx-glr-backref-type-py-class"><span class="n">RadarElevationBearingRange</span></a><span class="p">(</span><span class="n">ndim_state</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
                                   <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">position_mapping</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">radar_mapping</span></a><span class="p">,</span>
                                   <a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">noise_covar</span></a><span class="o">=</span><a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">noise_covar</span></a><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="attach-the-sensor-to-the-platform">
<h2>Attach the sensor to the platform<a class="headerlink" href="#attach-the-sensor-to-the-platform" title="Permalink to this heading"></a></h2>
<p>Now that we have created our radar sensor we need to mount the sensor onto the platform we have previously created.</p>
<p>Sensors can be mounted with two additional parameters; the mounting offset and rotation offset.</p>
<p>The mounting offset:</p>
<blockquote>
<div><ul class="simple">
<li><p>defines how the sensors position is offset from the platform,</p></li>
<li><p>defaults to a position offset of zero.</p></li>
</ul>
</div></blockquote>
<p>The rotation_offset:</p>
<blockquote>
<div><ul class="simple">
<li><p>defines the sensors orientation relative to that of the platform,</p></li>
<li><p>defaults to a zero orientation offset.</p></li>
</ul>
</div></blockquote>
<p>The default assumption is that the sensor is located at the centre point of the platform and orientated to align with
the platform body. In this example we are happy to use the default assumptions and therefore the sensor can be added.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">platform</span><span class="o">.</span><span class="n">add_sensor</span><span class="p">(</span><span class="n">radar</span><span class="p">)</span>
</pre></div>
</div>
<p>As before we can query the platform to demonstrate that it has a sensor mounted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">platform</span><span class="o">.</span><span class="n">sensors</span></a>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(RadarElevationBearingRange(
    position_mapping=(0, 2, 4),
    noise_covar=CovarianceMatrix([[2.74155678e-03, 0.00000000e+00, 0.00000000e+00],
                                  [0.00000000e+00, 6.85389195e-06, 0.00000000e+00],
                                  [0.00000000e+00, 0.00000000e+00, 6.25000000e+02]]),
    resolutions=None,
    rotation_offset=StateVector([[0],
                                 [0],
                                 [0]]),
    mounting_offset=StateVector([[0],
                                 [0],
                                 [0]]),
    movement_controller=FixedMovable(
                            states=[State(
                                       state_vector=StateVector([[0],
                                                                 [0],
                                                                 [0]]),
                                       timestamp=2022-09-26 17:25:49.832156)],
                            position_mapping=(0, 1, 2),
                            velocity_mapping=None,
                            orientation=StateVector([[0],
                                                     [0],
                                                     [0]])),
    ndim_state=6,
    clutter_model=None,
    max_range=inf),)
</pre></div>
</div>
<p>You will notice that platform.sensors returns a list which contains our single sensor. This hints at the multi-sensor
platform functionality which is shown in a subsequent example.</p>
<p>We can also check to ensure that the default mounting_offsets have been applied:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">radar</span><span class="o">.</span><span class="n">mounting_offset</span></a>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>StateVector([[0],
             [0],
             [0]])
</pre></div>
</div>
<p>And that the rotation_offsets have been applied:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">radar</span><span class="o">.</span><span class="n">rotation_offset</span></a>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>StateVector([[0],
             [0],
             [0]])
</pre></div>
</div>
</section>
<section id="building-a-simulation">
<h2>Building a simulation<a class="headerlink" href="#building-a-simulation" title="Permalink to this heading"></a></h2>
<p>Now that we have created a sensor platform we need to build a simulation which generates targets for the sensor to
detect and track. For this example we are going to use a <a class="reference internal" href="../../smartfusion.simulator.html#smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" title="smartfusion.simulator.simple.MultiTargetGroundTruthSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTargetGroundTruthSimulator</span></code></a>. this simulator
enables multiple ground truth targets to be created based on a number of user defined parameters.</p>
<p>In this example targets are initiated with values based upon a mean state and a covariance, using a Gaussian
assumption. This is done by creating a <a class="reference internal" href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState"><code class="xref py py-class docutils literal notranslate"><span class="pre">GaussianState</span></code></a> object which describes the distribution from which we
want our targets to be drawn from. For this example targets will be generated using the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><span class="math notranslate nohighlight">\(x\)</span> is Gaussian distributed around the platform location with variance of <span class="math notranslate nohighlight">\(\mathrm{2}km\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(y\)</span> is Gaussian distributed around the platform location with variance of <span class="math notranslate nohighlight">\(\mathrm{2}km\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(z\)</span> is Gaussian distributed around an altitude of <span class="math notranslate nohighlight">\(\mathrm{9}km\)</span> with variance of <span class="math notranslate nohighlight">\(\mathrm{0.1}km\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\dot{x}\)</span> is Gaussian distributed around <span class="math notranslate nohighlight">\(\mathrm{100}ms^{-1}\)</span> with variance of <span class="math notranslate nohighlight">\(\mathrm{50}ms^{-1}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\dot{y}\)</span> is Gaussian distributed around <span class="math notranslate nohighlight">\(\mathrm{100}ms^{-1}\)</span> with variance of <span class="math notranslate nohighlight">\(\mathrm{50}ms^{-1}\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(\dot{z}\)</span> is Gaussian distributed around <span class="math notranslate nohighlight">\(\mathrm{0}ms^{-1}\)</span> with variance of <span class="math notranslate nohighlight">\(\mathrm{1}ms^{-1}\)</span></p></li>
</ul>
</div></blockquote>
<p>We will also configure our simulator to randomly create and delete targets, based on a birth rate and death rate we
specify. In this example we set the birth rate to be 0.10, i.e. on any given time step there is a 10% chance of a new
target being initiated. We have set the death rate to 0.01, i.e. on any given time step there is a 1% chance that a
target will be removed from the simulation.</p>
<p>The above setup will provide a case which loosely approximates an air surveillance radar at an airport.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.simulator.simple</span> <span class="kn">import</span> <a href="../../smartfusion.simulator.html#smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" title="smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" class="sphx-glr-backref-module-smartfusion-simulator-simple sphx-glr-backref-type-py-class"><span class="n">MultiTargetGroundTruthSimulator</span></a>

<span class="c1"># Set a constant velocity transition model for the targets</span>
<a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a> <span class="o">=</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">CombinedLinearGaussianTransitionModel</span></a><span class="p">(</span>
    <span class="p">[</span><a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span> <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.ConstantVelocity" title="smartfusion.models.transition.linear.ConstantVelocity" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class"><span class="n">ConstantVelocity</span></a><span class="p">(</span><span class="mf">0.1</span><span class="p">)])</span>

<span class="c1"># Define the Gaussian State from which new targets are sampled on initialisation</span>
<a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">initial_target_state</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">StateVector</span></a><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">9000</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]]),</span>
                                     <a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class"><span class="n">CovarianceMatrix</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">([</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1</span><span class="p">])))</span>

<a href="../../smartfusion.simulator.html#smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" title="smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" class="sphx-glr-backref-module-smartfusion-simulator-simple sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_sim</span></a> <span class="o">=</span> <a href="../../smartfusion.simulator.html#smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" title="smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" class="sphx-glr-backref-module-smartfusion-simulator-simple sphx-glr-backref-type-py-class"><span class="n">MultiTargetGroundTruthSimulator</span></a><span class="p">(</span>
    <a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a><span class="o">=</span><a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a><span class="p">,</span>  <span class="c1"># target transition model</span>
    <span class="n">initial_state</span><span class="o">=</span><a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">initial_target_state</span></a><span class="p">,</span>  <span class="c1"># add our initial state for targets</span>
    <span class="n">timestep</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="datetime.timedelta" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class"><span class="n">timedelta</span></a><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>  <span class="c1"># time between measurements</span>
    <span class="n">number_steps</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>  <span class="c1"># 2 minute</span>
    <span class="n">birth_rate</span><span class="o">=</span><span class="mf">0.10</span><span class="p">,</span>  <span class="c1"># 10% chance of a new target being born</span>
    <span class="n">death_probability</span><span class="o">=</span><span class="mf">0.01</span>  <span class="c1"># 1% chance of a target being killed</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Now that we have set up our ground truth simulation we need to add our platform into the simulation capability. This
is done using the <a class="reference internal" href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlatformDetectionSimulator</span></code></a>. This simulator allows a <em>list</em> of platforms to be added into
the simulation, when the simulation is processed the platforms are able to make detections of both the ground truth
targets and other platforms.</p>
<p>In this case we have a single platform, therefore the radar sensor on this platform will only be able to make
measurements of the ground truth objects generated by the simulator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the PlatformDetectionSimulator</span>
<span class="kn">from</span> <span class="nn">smartfusion.simulator.platform</span> <span class="kn">import</span> <a href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator" class="sphx-glr-backref-module-smartfusion-simulator-platform sphx-glr-backref-type-py-class"><span class="n">PlatformDetectionSimulator</span></a>

<a href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator" class="sphx-glr-backref-module-smartfusion-simulator-platform sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sim</span></a> <span class="o">=</span> <a href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator" class="sphx-glr-backref-module-smartfusion-simulator-platform sphx-glr-backref-type-py-class"><span class="n">PlatformDetectionSimulator</span></a><span class="p">(</span><span class="n">groundtruth</span><span class="o">=</span><a href="../../smartfusion.simulator.html#smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" title="smartfusion.simulator.simple.MultiTargetGroundTruthSimulator" class="sphx-glr-backref-module-smartfusion-simulator-simple sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_sim</span></a><span class="p">,</span> <span class="n">platforms</span><span class="o">=</span><span class="p">[</span><span class="n">platform</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="creating-the-tracker-components">
<h2>Creating the Tracker Components<a class="headerlink" href="#creating-the-tracker-components" title="Permalink to this heading"></a></h2>
<p>As stated above the aim of this example is to show how <a class="reference internal" href="../../smartfusion.platform.html#smartfusion.platform.base.Platform" title="smartfusion.platform.base.Platform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Platform</span></code></a>, <a class="reference internal" href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> and
<a class="reference internal" href="../../smartfusion.simulator.html#smartfusion.simulator.base.Simulator" title="smartfusion.simulator.base.Simulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulator</span></code></a> work within SMART FUSION. We will therefore quickly build an Unscented Kalman Filter which
initiates measurements using a simple heuristic initiation and deletes any track where no detection is associated for
2 consecutive time steps. There are a number of tutorials for how to build the tracking components provided in the
<a class="reference internal" href="../index.html#tutorials"><span class="std std-ref">Tutorials</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create an Unscented Kalman Predictor</span>
<a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.UnscentedKalmanPredictor" title="smartfusion.predictor.kalman.UnscentedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">predictor</span></a> <span class="o">=</span> <a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.UnscentedKalmanPredictor" title="smartfusion.predictor.kalman.UnscentedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class"><span class="n">UnscentedKalmanPredictor</span></a><span class="p">(</span><a href="../../smartfusion.models.transition.html#smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" title="smartfusion.models.transition.linear.CombinedLinearGaussianTransitionModel" class="sphx-glr-backref-module-smartfusion-models-transition-linear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">transition_model</span></a><span class="p">)</span>

<span class="c1"># Create an Unscented Kalman Updater, note our sensor adds a measurement model to detections</span>
<a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">updater</span></a> <span class="o">=</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class"><span class="n">UnscentedKalmanUpdater</span></a><span class="p">(</span><span class="n">measurement_model</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<p>When we build our updater you will notice that we do not provide a measurement model. This is because we
have defined a measurement model which is attached to our radar sensor, each detection made by this sensor
will have our radar measurement model associated with it. In SMART FUSION the <a class="reference internal" href="../../smartfusion.updater.html#smartfusion.updater.base.Updater" title="smartfusion.updater.base.Updater"><code class="xref py py-class docutils literal notranslate"><span class="pre">Updater</span></code></a> checks the
detections provided and will use any measurement model attached to the detection.</p>
</section>
<section id="setup-initiator-class-for-the-tracker">
<h2>Setup Initiator class for the Tracker<a class="headerlink" href="#setup-initiator-class-for-the-tracker" title="Permalink to this heading"></a></h2>
<p>We will now build a simple heuristic initiator.
This assumes most of the deviation is caused by the bearing measurement error. It converts the bearing error error
into <span class="math notranslate nohighlight">\(x, y\)</span> components using the target bearing. For z, we simply use <span class="math notranslate nohighlight">\(r*\sigma_{\theta}^2\)</span> (this ignores
any bearing or range related components). Velocity covariances are just based on expected velocity range of targets.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.types.state</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.update</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class"><span class="n">GaussianStateUpdate</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.initiator.simple</span> <span class="kn">import</span> <a href="../../smartfusion.initiator.html#smartfusion.initiator.simple.SimpleMeasurementInitiator" title="smartfusion.initiator.simple.SimpleMeasurementInitiator" class="sphx-glr-backref-module-smartfusion-initiator-simple sphx-glr-backref-type-py-class"><span class="n">SimpleMeasurementInitiator</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.track</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class"><span class="n">Track</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.types.hypothesis</span> <span class="kn">import</span> <a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class"><span class="n">SingleHypothesis</span></a>


<span class="k">class</span> <span class="nc">Initiator</span><span class="p">(</span><a href="../../smartfusion.initiator.html#smartfusion.initiator.simple.SimpleMeasurementInitiator" title="smartfusion.initiator.simple.SimpleMeasurementInitiator" class="sphx-glr-backref-module-smartfusion-initiator-simple sphx-glr-backref-type-py-class"><span class="n">SimpleMeasurementInitiator</span></a><span class="p">):</span>
    <span class="k">def</span> <span class="nf">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">MAX_DEV</span> <span class="o">=</span> <span class="mf">500.</span>
        <span class="n">tracks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">measurement_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measurement_model</span>
        <span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.TrueDetection" title="smartfusion.types.detection.TrueDetection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">:</span>
            <span class="n">state_vector</span> <span class="o">=</span> <span class="n">measurement_model</span><span class="o">.</span><span class="n">inverse_function</span><span class="p">(</span>
                            <a href="../../smartfusion.types.html#smartfusion.types.detection.TrueDetection" title="smartfusion.types.detection.TrueDetection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span></a><span class="p">)</span>
            <span class="n">model_covar</span> <span class="o">=</span> <span class="n">measurement_model</span><span class="o">.</span><span class="n">covar</span><span class="p">()</span>

            <span class="n">el_az_range</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">(</span><span class="n">model_covar</span><span class="p">))</span>  <span class="c1"># elev, az, range</span>

            <span class="n">std_pos</span> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">el_az_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">stdx</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">abs</span></a><span class="p">(</span><span class="n">std_pos</span><span class="o">*</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">sin</span></a><span class="p">(</span><span class="n">el_az_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">stdy</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">abs</span></a><span class="p">(</span><span class="n">std_pos</span><span class="o">*</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">cos</span></a><span class="p">(</span><span class="n">el_az_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">stdz</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.ufunc.html#numpy.ufunc" title="numpy.ufunc" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">np</span><span class="o">.</span><span class="n">abs</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">el_az_range</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">stdx</span> <span class="o">&gt;</span> <span class="n">MAX_DEV</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning - X Deviation exceeds limit!!&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">stdy</span> <span class="o">&gt;</span> <span class="n">MAX_DEV</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning - Y Deviation exceeds limit!!&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">stdz</span> <span class="o">&gt;</span> <span class="n">MAX_DEV</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning - Z Deviation exceeds limit!!&#39;</span><span class="p">)</span>
            <span class="n">C0</span> <span class="o">=</span> <a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">(</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="n">stdx</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="n">stdy</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="n">stdz</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">tracks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class"><span class="n">Track</span></a><span class="p">([</span><a href="../../smartfusion.types.html#smartfusion.types.update.GaussianStateUpdate" title="smartfusion.types.update.GaussianStateUpdate" class="sphx-glr-backref-module-smartfusion-types-update sphx-glr-backref-type-py-class"><span class="n">GaussianStateUpdate</span></a><span class="p">(</span>
                <span class="n">state_vector</span><span class="p">,</span>
                <span class="n">C0</span><span class="p">,</span>
                <a href="../../smartfusion.types.html#smartfusion.types.hypothesis.SingleHypothesis" title="smartfusion.types.hypothesis.SingleHypothesis" class="sphx-glr-backref-module-smartfusion-types-hypothesis sphx-glr-backref-type-py-class"><span class="n">SingleHypothesis</span></a><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.TrueDetection" title="smartfusion.types.detection.TrueDetection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span></a><span class="p">),</span>
                <span class="n">timestamp</span><span class="o">=</span><a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span><span class="o">.</span><span class="n">timestamp</span></a><span class="p">)</span>
            <span class="p">]))</span>
        <span class="k">return</span> <span class="n">tracks</span>


<a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">meas_model</span></a> <span class="o">=</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class"><span class="n">CartesianToElevationBearingRange</span></a><span class="p">(</span>
            <span class="n">ndim_state</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
            <span class="n">mapping</span><span class="o">=</span><a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]),</span>
            <a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">noise_covar</span></a><span class="o">=</span><a href="../../smartfusion.types.html#smartfusion.types.array.CovarianceMatrix" title="smartfusion.types.array.CovarianceMatrix" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">noise_covar</span></a><span class="p">)</span>

<a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prior_state</span></a> <span class="o">=</span> <a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class"><span class="n">GaussianState</span></a><span class="p">(</span>
        <a href="https://numpy.org/doc/stable/reference/generated/numpy.array.html#numpy.array" title="numpy.array" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">array</span></a><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">]]),</span>
        <a href="https://numpy.org/doc/stable/reference/generated/numpy.diag.html#numpy.diag" title="numpy.diag" class="sphx-glr-backref-module-numpy sphx-glr-backref-type-py-function"><span class="n">np</span><span class="o">.</span><span class="n">diag</span></a><span class="p">([</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="n">initiator</span> <span class="o">=</span> <a href="../../smartfusion.initiator.html#smartfusion.initiator.simple.SimpleMeasurementInitiator" title="smartfusion.initiator.simple.SimpleMeasurementInitiator" class="sphx-glr-backref-module-smartfusion-initiator-simple sphx-glr-backref-type-py-class"><span class="n">Initiator</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.state.GaussianState" title="smartfusion.types.state.GaussianState" class="sphx-glr-backref-module-smartfusion-types-state sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">prior_state</span></a><span class="p">,</span> <span class="n">measurement_model</span><span class="o">=</span><a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">meas_model</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Now that we have setup out tracking scenario we can wrap our simulation environment within a
<a class="reference internal" href="../../smartfusion.tracker.html#smartfusion.tracker.simple.MultiTargetTracker" title="smartfusion.tracker.simple.MultiTargetTracker"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiTargetTracker</span></code></a>. This takes our tracker configurations and the simulation we previously created and
brings them together into a single iterable object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartfusion.hypothesiser.distance</span> <span class="kn">import</span> <a href="../../smartfusion.hypothesiser.html#smartfusion.hypothesiser.distance.DistanceHypothesiser" title="smartfusion.hypothesiser.distance.DistanceHypothesiser" class="sphx-glr-backref-module-smartfusion-hypothesiser-distance sphx-glr-backref-type-py-class"><span class="n">DistanceHypothesiser</span></a>
<span class="kn">from</span> <span class="nn">smartfusion.measures</span> <span class="kn">import</span> <a href="../../smartfusion.measures.html#smartfusion.measures.Mahalanobis" title="smartfusion.measures.Mahalanobis" class="sphx-glr-backref-module-smartfusion-measures sphx-glr-backref-type-py-class"><span class="n">Mahalanobis</span></a>
<a href="../../smartfusion.hypothesiser.html#smartfusion.hypothesiser.distance.DistanceHypothesiser" title="smartfusion.hypothesiser.distance.DistanceHypothesiser" class="sphx-glr-backref-module-smartfusion-hypothesiser-distance sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">hypothesiser</span></a> <span class="o">=</span> <a href="../../smartfusion.hypothesiser.html#smartfusion.hypothesiser.distance.DistanceHypothesiser" title="smartfusion.hypothesiser.distance.DistanceHypothesiser" class="sphx-glr-backref-module-smartfusion-hypothesiser-distance sphx-glr-backref-type-py-class"><span class="n">DistanceHypothesiser</span></a><span class="p">(</span><a href="../../smartfusion.predictor.html#smartfusion.predictor.kalman.UnscentedKalmanPredictor" title="smartfusion.predictor.kalman.UnscentedKalmanPredictor" class="sphx-glr-backref-module-smartfusion-predictor-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">predictor</span></a><span class="p">,</span> <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">updater</span></a><span class="p">,</span> <span class="n">measure</span><span class="o">=</span><a href="../../smartfusion.measures.html#smartfusion.measures.Mahalanobis" title="smartfusion.measures.Mahalanobis" class="sphx-glr-backref-module-smartfusion-measures sphx-glr-backref-type-py-class"><span class="n">Mahalanobis</span></a><span class="p">(),</span> <span class="n">missed_distance</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">smartfusion.dataassociator.neighbour</span> <span class="kn">import</span> <a href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.neighbour.NearestNeighbour" title="smartfusion.dataassociator.neighbour.NearestNeighbour" class="sphx-glr-backref-module-smartfusion-dataassociator-neighbour sphx-glr-backref-type-py-class"><span class="n">NearestNeighbour</span></a>
<a href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.neighbour.NearestNeighbour" title="smartfusion.dataassociator.neighbour.NearestNeighbour" class="sphx-glr-backref-module-smartfusion-dataassociator-neighbour sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data_associator</span></a> <span class="o">=</span> <a href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.neighbour.NearestNeighbour" title="smartfusion.dataassociator.neighbour.NearestNeighbour" class="sphx-glr-backref-module-smartfusion-dataassociator-neighbour sphx-glr-backref-type-py-class"><span class="n">NearestNeighbour</span></a><span class="p">(</span><a href="../../smartfusion.hypothesiser.html#smartfusion.hypothesiser.distance.DistanceHypothesiser" title="smartfusion.hypothesiser.distance.DistanceHypothesiser" class="sphx-glr-backref-module-smartfusion-hypothesiser-distance sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">hypothesiser</span></a><span class="p">)</span>

<a href="../../smartfusion.deleter.html#smartfusion.deleter.time.UpdateTimeStepsDeleter" title="smartfusion.deleter.time.UpdateTimeStepsDeleter" class="sphx-glr-backref-module-smartfusion-deleter-time sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">deleter</span></a> <span class="o">=</span> <a href="../../smartfusion.deleter.html#smartfusion.deleter.time.UpdateTimeStepsDeleter" title="smartfusion.deleter.time.UpdateTimeStepsDeleter" class="sphx-glr-backref-module-smartfusion-deleter-time sphx-glr-backref-type-py-class"><span class="n">UpdateTimeStepsDeleter</span></a><span class="p">(</span><span class="n">time_steps_since_update</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Create a Kalman multi-target tracker</span>
<a href="../../smartfusion.tracker.html#smartfusion.tracker.simple.MultiTargetTracker" title="smartfusion.tracker.simple.MultiTargetTracker" class="sphx-glr-backref-module-smartfusion-tracker-simple sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracker</span></a> <span class="o">=</span> <a href="../../smartfusion.tracker.html#smartfusion.tracker.simple.MultiTargetTracker" title="smartfusion.tracker.simple.MultiTargetTracker" class="sphx-glr-backref-module-smartfusion-tracker-simple sphx-glr-backref-type-py-class"><span class="n">MultiTargetTracker</span></a><span class="p">(</span>
    <span class="n">initiator</span><span class="o">=</span><span class="n">initiator</span><span class="p">,</span>
    <a href="../../smartfusion.deleter.html#smartfusion.deleter.time.UpdateTimeStepsDeleter" title="smartfusion.deleter.time.UpdateTimeStepsDeleter" class="sphx-glr-backref-module-smartfusion-deleter-time sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">deleter</span></a><span class="o">=</span><a href="../../smartfusion.deleter.html#smartfusion.deleter.time.UpdateTimeStepsDeleter" title="smartfusion.deleter.time.UpdateTimeStepsDeleter" class="sphx-glr-backref-module-smartfusion-deleter-time sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">deleter</span></a><span class="p">,</span>
    <span class="n">detector</span><span class="o">=</span><a href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator" class="sphx-glr-backref-module-smartfusion-simulator-platform sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sim</span></a><span class="p">,</span>
    <a href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.neighbour.NearestNeighbour" title="smartfusion.dataassociator.neighbour.NearestNeighbour" class="sphx-glr-backref-module-smartfusion-dataassociator-neighbour sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data_associator</span></a><span class="o">=</span><a href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.neighbour.NearestNeighbour" title="smartfusion.dataassociator.neighbour.NearestNeighbour" class="sphx-glr-backref-module-smartfusion-dataassociator-neighbour sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">data_associator</span></a><span class="p">,</span>
    <a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">updater</span></a><span class="o">=</span><a href="../../smartfusion.updater.html#smartfusion.updater.kalman.UnscentedKalmanUpdater" title="smartfusion.updater.kalman.UnscentedKalmanUpdater" class="sphx-glr-backref-module-smartfusion-updater-kalman sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">updater</span></a>
<span class="p">)</span>
</pre></div>
</div>
<p>The final step is to iterate our tracker over the simulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Store for plotting later</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Store for plotting later</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Store for plotting later</span>

<span class="k">for</span> <a href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="datetime.datetime" class="sphx-glr-backref-module-datetime sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">time</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#set" title="builtins.set" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ctracks</span></a> <span class="ow">in</span> <a href="../../smartfusion.tracker.html#smartfusion.tracker.simple.MultiTargetTracker" title="smartfusion.tracker.simple.MultiTargetTracker" class="sphx-glr-backref-module-smartfusion-tracker-simple sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracker</span></a><span class="p">:</span>
    <span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#set" title="builtins.set" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ctracks</span></a><span class="p">:</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a> <span class="o">=</span> <span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a> <span class="ow">not</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">:</span>
            <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">track</span></a><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a><span class="p">)</span>

    <span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_sim</span><span class="o">.</span><span class="n">current</span></a><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a> <span class="o">=</span> <span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span><span class="o">.</span><span class="n">state_vector</span></a><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a> <span class="ow">not</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">:</span>
            <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.groundtruth.GroundTruthPath" title="smartfusion.types.groundtruth.GroundTruthPath" class="sphx-glr-backref-module-smartfusion-types-groundtruth sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">truth</span></a><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a><span class="p">)</span>

    <span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.detection.TrueDetection" title="smartfusion.types.detection.TrueDetection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span></a> <span class="ow">in</span> <a href="../../smartfusion.simulator.html#smartfusion.simulator.platform.PlatformDetectionSimulator" title="smartfusion.simulator.platform.PlatformDetectionSimulator" class="sphx-glr-backref-module-smartfusion-simulator-platform sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">sim</span></a><span class="o">.</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">:</span>
        <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detect_state</span></a> <span class="o">=</span> <a href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange.inverse_function" title="smartfusion.models.measurement.nonlinear.CartesianToElevationBearingRange.inverse_function" class="sphx-glr-backref-module-smartfusion-models-measurement-nonlinear sphx-glr-backref-type-py-method"><span class="n">detection</span><span class="o">.</span><span class="n">measurement_model</span><span class="o">.</span><span class="n">inverse_function</span></a><span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.detection.TrueDetection" title="smartfusion.types.detection.TrueDetection" class="sphx-glr-backref-module-smartfusion-types-detection sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detection</span></a><span class="p">)</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a> <span class="o">=</span> <span class="p">(</span><a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detect_state</span></a><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <a href="../../smartfusion.types.html#smartfusion.types.array.StateVector" title="smartfusion.types.array.StateVector" class="sphx-glr-backref-module-smartfusion-types-array sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detect_state</span></a><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="o">.</span><span class="n">append</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#tuple" title="builtins.tuple" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">loc</span></a><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
Warning - Z Deviation exceeds limit!!
</pre></div>
</div>
</section>
<section id="plotting-the-outputs">
<h2>Plotting the outputs<a class="headerlink" href="#plotting-the-outputs" title="Permalink to this heading"></a></h2>
<p>First we will plot the ground truth paths (red) which have been generated in the simulation step.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" title="matplotlib.pyplot.figure" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span></a><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.add_subplot" title="matplotlib.figure.Figure.add_subplot" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-method"><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="s2">&quot;$East$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s2">&quot;$North$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylim.html#matplotlib.axes.Axes.set_ylim" title="matplotlib.axes.Axes.set_ylim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlim.html#matplotlib.axes.Axes.set_xlim" title="matplotlib.axes.Axes.set_xlim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>

<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>  <span class="c1"># Plot true locations in red</span>

<span class="c1"># plot platform location</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_Sensor_Platform_Simulation_001.png" srcset="../../_images/sphx_glr_Sensor_Platform_Simulation_001.png" alt="Sensor Platform Simulation" class = "sphx-glr-single-img"/><div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection object at 0x16d2e8310&gt;
</pre></div>
</div>
<p>If we now overlay the detections (black) onto the ground truth paths (red) we can see how the sensor performs,
generating detections based upon the <a class="reference internal" href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.base.MeasurementModel" title="smartfusion.models.measurement.base.MeasurementModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeasurementModel</span></code></a> we provided it with. The platform location is
shown in yellow.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" title="matplotlib.pyplot.figure" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span></a><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.add_subplot" title="matplotlib.figure.Figure.add_subplot" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-method"><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="s2">&quot;$East$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s2">&quot;$North$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylim.html#matplotlib.axes.Axes.set_ylim" title="matplotlib.axes.Axes.set_ylim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlim.html#matplotlib.axes.Axes.set_xlim" title="matplotlib.axes.Axes.set_xlim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>

<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>  <span class="c1"># Plot true locations in red</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">]</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>  <span class="c1"># Plot detections in black</span>

<span class="c1"># plot platform location</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_Sensor_Platform_Simulation_002.png" srcset="../../_images/sphx_glr_Sensor_Platform_Simulation_002.png" alt="Sensor Platform Simulation" class = "sphx-glr-single-img"/><div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection object at 0x16d2fe9a0&gt;
</pre></div>
</div>
<p>Now we overlay the ground truth locations (red), detections (black) and tracks (blue). This shows all the stages of
the tracker simulation we have built in a single figure. The platform location is shown in yellow.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" title="matplotlib.pyplot.figure" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span></a><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.add_subplot" title="matplotlib.figure.Figure.add_subplot" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-method"><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="s2">&quot;$East$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s2">&quot;$North$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylim.html#matplotlib.axes.Axes.set_ylim" title="matplotlib.axes.Axes.set_ylim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlim.html#matplotlib.axes.Axes.set_xlim" title="matplotlib.axes.Axes.set_xlim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>  <span class="c1"># Plot true locations in red</span>

<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>  <span class="c1"># Plot track estimates in blue</span>

<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">]</span>
<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">detections</span></a><span class="p">]</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>  <span class="c1"># Plot detections in black</span>

<span class="c1"># plot platform location</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_Sensor_Platform_Simulation_003.png" srcset="../../_images/sphx_glr_Sensor_Platform_Simulation_003.png" alt="Sensor Platform Simulation" class = "sphx-glr-single-img"/><div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection object at 0x16d444f40&gt;
</pre></div>
</div>
<p>Finally, we can plot the estimated tracks (blue) alongside the ground truth paths (red). Because we used a noisy
sensor this view makes it easier to quickly see the tracker performance. The platform location is
shown in yellow.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="matplotlib.figure.Figure" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" title="matplotlib.pyplot.figure" class="sphx-glr-backref-module-matplotlib-pyplot sphx-glr-backref-type-py-function"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span></a><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure.add_subplot" title="matplotlib.figure.Figure.add_subplot" class="sphx-glr-backref-module-matplotlib-figure sphx-glr-backref-type-py-method"><span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span></a><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" title="matplotlib.axes.Axes.set_xlabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span></a><span class="p">(</span><span class="s2">&quot;$East$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" title="matplotlib.axes.Axes.set_ylabel" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span></a><span class="p">(</span><span class="s2">&quot;$North$&quot;</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_ylim.html#matplotlib.axes.Axes.set_ylim" title="matplotlib.axes.Axes.set_ylim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.set_xlim.html#matplotlib.axes.Axes.set_xlim" title="matplotlib.axes.Axes.set_xlim" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span></a><span class="p">(</span><span class="o">-</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">groundtruth_paths</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>  <span class="c1"># Plot true locations in red</span>

<span class="k">for</span> <a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a> <span class="o">=</span> <span class="p">[</span><span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">kalman_tracks</span></a><span class="p">[</span><a href="../../smartfusion.types.html#smartfusion.types.track.Track" title="smartfusion.types.track.Track" class="sphx-glr-backref-module-smartfusion-types-track sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">key</span></a><span class="p">]]</span>
    <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" title="matplotlib.axes.Axes.plot" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">plot</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">X</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">Y</span></a><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>  <span class="c1"># Plot track estimates in blue</span>

<span class="c1"># plot platform location</span>
<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.scatter.html#matplotlib.axes.Axes.scatter" title="matplotlib.axes.Axes.scatter" class="sphx-glr-backref-module-matplotlib-axes sphx-glr-backref-type-py-method"><span class="n">ax</span><span class="o">.</span><span class="n">scatter</span></a><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img src="../../_images/sphx_glr_Sensor_Platform_Simulation_004.png" srcset="../../_images/sphx_glr_Sensor_Platform_Simulation_004.png" alt="Sensor Platform Simulation" class = "sphx-glr-single-img"/><div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection object at 0x16d486760&gt;
</pre></div>
</div>
<p>To familiarise yourself with sensors it is recommended that you investigate changing the parameters within the sensor
Measurement Model in order to see the impact on detections and ultimately tracker performance. For this example we
used a <em>hard</em> association logic coupled with a relatively noisy sensor. A suggested further exercise is to modify this
example to use a <em>soft</em> association step such as Probabilistic Data Association (<a class="reference internal" href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.probability.PDA" title="smartfusion.dataassociator.probability.PDA"><code class="xref py py-class docutils literal notranslate"><span class="pre">PDA</span></code></a>) or
Joint Probabilistic Data Association (<a class="reference internal" href="../../smartfusion.dataassociator.html#smartfusion.dataassociator.probability.JPDA" title="smartfusion.dataassociator.probability.JPDA"><code class="xref py py-class docutils literal notranslate"><span class="pre">JPDA</span></code></a>).</p>
</section>
<section id="key-points">
<h2>Key points<a class="headerlink" href="#key-points" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Sensor platforms, which combine <a class="reference internal" href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> and <a class="reference internal" href="../../smartfusion.platform.html#smartfusion.platform.base.Platform" title="smartfusion.platform.base.Platform"><code class="xref py py-class docutils literal notranslate"><span class="pre">Platform</span></code></a> can be created in SMART FUSION and used
as part of a tracking simulation.</p></li>
<li><p>When using a <a class="reference internal" href="../../smartfusion.sensor.html#smartfusion.sensor.sensor.Sensor" title="smartfusion.sensor.sensor.Sensor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sensor</span></code></a> to generate detections there is no need to provide an <a class="reference internal" href="../../smartfusion.updater.html#smartfusion.updater.base.Updater" title="smartfusion.updater.base.Updater"><code class="xref py py-class docutils literal notranslate"><span class="pre">Updater</span></code></a> with a
<a class="reference internal" href="../../smartfusion.models.measurement.html#smartfusion.models.measurement.base.MeasurementModel" title="smartfusion.models.measurement.base.MeasurementModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">MeasurementModel</span></code></a> as each detection is attributed with the relevant sensors measurement model.</p></li>
<li><p>Sensors will generate detections of all platforms within the simulation, not just ground truth objects.</p></li>
</ol>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.042 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-tutorials-moreexamples-sensor-platform-simulation-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/claycurry34/Smart-Fusion/main?filepath=notebooks/auto_tutorials/moreexamples/Sensor_Platform_Simulation.ipynb"><img alt="Launch binder" src="../../_images/binder_badge_logo2.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/2235a3b5878c710a58139affae01df40/Sensor_Platform_Simulation.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">Sensor_Platform_Simulation.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/4fa9a6e7856793bfad8f10f162155fce/Sensor_Platform_Simulation.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">Sensor_Platform_Simulation.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ParticleFlow.html" class="btn btn-neutral float-left" title="Gromov Particle Flow Filter" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Smooth_Platform_Coordinate_Transitions.html" class="btn btn-neutral float-right" title="Creating Smooth Transitions Between Coordinates" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../../copyright.html">Copyright</a> 2022 University of Oklahoma.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>